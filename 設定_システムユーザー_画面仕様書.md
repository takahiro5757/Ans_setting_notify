# 1. 画面名

---

**システムユーザー（System User Management）**

---

# 2. 要素別仕様

---

## 2-1. システムユーザー一覧テーブル

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| ユーザー追加ボタン | Button | 入力 | 新しいシステムユーザーを追加（variant="contained"） |
| 検索フィールド | TextField | 入力 | ユーザー名・メールアドレスでの検索 |
| 権限フィルター | Select | 入力 | 権限レベルでのフィルタリング |
| ステータスフィルター | Select | 入力 | アクティブ・無効でのフィルタリング |
| ユーザー一覧テーブル | Table | 出力 | システムユーザー情報の一覧表示 |
| 編集ボタン | IconButton | 入力 | 個別ユーザー情報の編集 |
| 削除ボタン | IconButton | 入力 | ユーザー情報の削除 |
| ステータス切り替え | Switch | 入力 | アクティブ・無効の切り替え |

### テーブル列定義

| 列名 | 幅 | 表示内容 | ソート | フィルター |
| --- | --- | --- | --- | --- |
| 登録者氏名 | 120px | 登録者の氏名 | ✅ | ✅ |
| ユーザー名 | 120px | システムユーザー名 | ✅ | ✅ |
| メールアドレス | 200px | ログイン用メールアドレス | ✅ | ✅ |
| 権限レベル | 120px | Admin・営業管理・経理・一般 | ✅ | ✅ |
| ステータス | 80px | アクティブ・無効チップ表示 | ✅ | ✅ |
| 最終ログイン | 130px | 最終ログイン日時 | ✅ | - |
| 作成日 | 100px | アカウント作成日 | ✅ | - |
| アクション | 120px | 編集・削除・ステータス切り替え | - | - |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| ユーザー追加 | 追加ボタンクリック | 新規ユーザー追加ダイアログ表示 | ユーザー編集ダイアログ | なし |
| 検索実行 | 検索フィールド入力 | リアルタイム検索実行 | 同画面 | なし |
| 権限フィルター | セレクト変更 | 権限レベルでのフィルタリング | 同画面 | なし |
| ステータスフィルター | セレクト変更 | ステータスでのフィルタリング | 同画面 | なし |
| ユーザー編集 | 編集ボタンクリック | ユーザー編集ダイアログ表示 | ユーザー編集ダイアログ | なし |
| ユーザー削除 | 削除ボタンクリック | 削除確認ダイアログ表示 | 削除確認ダイアログ | 関連データチェック |
| ステータス切り替え | スイッチ操作 | ユーザーのアクティブ・無効切り替え | 同画面 | なし |

---

## 2-2. システムユーザー編集ダイアログ

### UI 要素・コントロール・I/O

#### 基本情報セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 登録者氏名 | TextField | 入力 | 登録者の氏名（必須） |
| ユーザー名 | TextField | 入力 | システムユーザー名（必須） |
| メールアドレス | TextField | 入力 | ログイン用メールアドレス（必須、一意制約） |
| 権限レベル | Select | 入力 | Admin・営業管理・経理・一般から選択（必須） |
| ステータス | Switch | 入力 | アクティブ・無効の切り替え |
| 備考 | TextField | 入力 | ユーザーに関する備考（multiline） |

#### 権限詳細セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 権限説明 | Typography | 出力 | 選択した権限レベルの詳細説明 |
| 利用可能機能一覧 | List | 出力 | 権限レベルに応じた利用可能機能一覧 |

### 権限レベル定義

#### Admin（経営管理者）
- **説明**: システム全体の管理権限
- **利用可能機能**:
  - 全ての設定項目への読み取り・編集権限
  - システムユーザー管理
  - スタッフ管理（追加・編集・削除）
  - 2次店管理（追加・編集・削除）
  - 代理店・イベント管理（追加・編集・削除）
  - 経理管理（全ての設定）
  - 案件管理（全権限）
  - シフト管理（全権限）

#### 営業管理
- **説明**: 営業・案件管理権限
- **利用可能機能**:
  - スタッフ管理（追加・編集、削除不可）
  - 2次店管理（追加・編集、削除不可）
  - 代理店・イベント管理（追加・編集・削除）
  - 案件管理（全権限）
  - シフト管理（全権限）

#### 経理
- **説明**: 経理関連機能の管理権限
- **利用可能機能**:
  - 経理管理（基本設定・メール設定・経理ルール）
  - 請求管理（全権限）
  - 支払管理（全権限）
  - 案件管理（参照のみ）

#### 一般
- **説明**: 限定的な機能利用権限
- **利用可能機能**:
  - ユーザー情報（自分のプロフィールのみ）
  - 案件管理（参照のみ）
  - シフト管理（参照のみ）

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 権限レベル変更 | セレクト変更 | 権限詳細情報の更新 | 同ダイアログ | なし |
| 保存実行 | 保存ボタンクリック | ユーザー情報の保存 | 一覧画面 | 全フィールドバリデーション |
| キャンセル | キャンセルボタンクリック | 変更をキャンセル | 一覧画面 | 変更確認ダイアログ |

---

## 2-3. 削除確認ダイアログ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 警告メッセージ | Typography | 出力 | 削除に関する警告文 |
| ユーザー情報表示 | Card | 出力 | 削除対象ユーザーの基本情報 |
| 関連データ警告 | Alert | 出力 | 関連する作業履歴・ログの警告 |
| 削除理由 | TextField | 入力 | 削除理由の入力（必須） |
| 削除確認チェック | Checkbox | 入力 | 削除を確認するチェックボックス |
| 削除実行ボタン | Button | 入力 | 削除を実行（color="error"） |
| キャンセルボタン | Button | 入力 | 削除をキャンセル |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 削除実行 | 削除ボタンクリック | ユーザーデータの論理削除 | 一覧画面 | 削除理由必須、確認チェック必須 |
| キャンセル | キャンセルボタンクリック | 削除をキャンセル | 一覧画面 | なし |

---

## 2-4. 一括操作機能

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 全選択チェック | Checkbox | 入力 | 全ユーザーの選択・解除 |
| 個別選択チェック | Checkbox | 入力 | 個別ユーザーの選択 |
| 一括操作メニュー | Select | 入力 | 選択したユーザーへの一括操作 |
| 一括実行ボタン | Button | 入力 | 選択した操作の一括実行 |

### 一括操作メニュー

| 操作名 | 説明 | 対象権限 |
| --- | --- | --- |
| ステータス変更（アクティブ） | 選択ユーザーをアクティブに変更 | Admin |
| ステータス変更（無効） | 選択ユーザーを無効に変更 | Admin |
| 権限レベル変更 | 選択ユーザーの権限レベルを一括変更 | Admin |
| CSVエクスポート | 選択ユーザー情報のCSV出力 | Admin・営業管理 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 全選択 | 全選択チェック操作 | 全ユーザーの選択状態切り替え | 同画面 | なし |
| 個別選択 | 個別チェック操作 | 個別ユーザーの選択状態切り替え | 同画面 | なし |
| 一括実行 | 一括実行ボタンクリック | 選択操作の一括実行 | 確認ダイアログ | 選択ユーザー必須 |




