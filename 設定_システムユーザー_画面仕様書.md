# 1. 画面名

---

**システムユーザー（System User Management）**

---

# 2. 要素別仕様

---

## 2-1. システムユーザー一覧セクション

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| ユーザー追加ボタン | Button | 入力 | 新しいシステムユーザーを追加（variant="contained"、AddIcon付き） |
| ユーザー一覧テーブル | Table | 出力 | システムユーザー情報の一覧表示（TableContainer+Paper） |
| 編集ボタン | IconButton | 入力 | 個別ユーザー情報の編集（EditIcon、color="primary"） |
| 削除ボタン | IconButton | 入力 | ユーザー情報の削除（DeleteIcon、color="error"） |
| ステータス切り替え | Switch | 入力 | アクティブ・無効の切り替え（size="small"） |

### テーブル列定義

| 列名 | 表示内容 | 表示形式 |
| --- | --- | --- |
| 氏名 | ユーザーの氏名 | PersonIcon + テキスト |
| メールアドレス | ログイン用メールアドレス | テキスト |
| ロール | 経営管理者・営業管理・経理 | Chip（executive_adminの場合color="primary"） |
| ステータス | アクティブ・無効の状態 | Switch + テキスト表示 |
| 最終ログイン | 最終ログイン日 | 日付文字列（未ログインは"-"） |
| 登録日 | アカウント作成日 | 日付文字列 |
| 操作 | 編集・削除ボタン | IconButton（編集・削除） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| ユーザー追加 | 追加ボタンクリック | 新規ユーザー追加ダイアログ表示 | ユーザー編集ダイアログ | なし |
| ユーザー編集 | 編集ボタンクリック | ユーザー編集ダイアログ表示 | ユーザー編集ダイアログ | なし |
| ユーザー削除 | 削除ボタンクリック | ユーザーデータの即座削除 | 同画面 | なし |
| ステータス切り替え | スイッチ操作 | ユーザーのアクティブ・無効切り替え | 同画面 | なし |
| 成功メッセージ表示 | 操作完了時 | 3秒間の成功メッセージ表示 | 同画面 | なし |

---

## 2-2. システムユーザー編集ダイアログ

### UI 要素・コントロール・I/O

#### 基本情報セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 氏名 | TextField | 入力 | ユーザーの氏名（必須、fullWidth） |
| メールアドレス | TextField | 入力 | ログイン用メールアドレス（必須、type="email"、placeholder="user@ansteype.com"） |
| ロール | Select | 入力 | 経営管理者・営業管理・経理から選択（必須、FormControl+InputLabel） |
| アカウント有効化 | Switch | 入力 | アクティブ・無効の切り替え（FormControlLabelでラップ） |

#### ダイアログアクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| キャンセルボタン | Button | 入力 | ダイアログを閉じる |
| 保存ボタン | Button | 入力 | ユーザー情報の保存（variant="contained"、新規時は「追加」、編集時は「更新」） |

### 権限レベル定義

#### 経営管理者（executive_admin）
- **説明**: 全システム管理権限
- **利用可能機能**:
  - ユーザー情報管理
  - スタッフ管理
  - 2次請管理
  - 案件管理
  - 経理管理
  - システムユーザー管理

#### 営業管理（sales_admin）
- **説明**: 営業・案件管理権限
- **利用可能機能**:
  - ユーザー情報管理
  - スタッフ管理
  - 2次請管理
  - 案件管理

#### 経理（accounting）
- **説明**: 経理関連設定・請求管理
- **利用可能機能**:
  - ユーザー情報管理
  - 経理管理
  - 案件管理

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| ロール選択 | Select変更 | ロール情報の表示更新 | 同ダイアログ | なし |
| 保存実行 | 保存ボタンクリック | ユーザー情報の保存（新規追加または更新） | 一覧画面 | 基本バリデーション |
| キャンセル | キャンセルボタンクリック | ダイアログを閉じる | 一覧画面 | なし |

---

## 2-3. 権限ロール説明セクション

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 権限ロール一覧カード | Card | 出力 | 各ロールの詳細情報表示 |
| ロール名 | Typography | 出力 | ロール名表示（variant="subtitle1"、fontWeight="bold"、color="primary"） |
| ロール説明 | Typography | 出力 | ロールの説明文（variant="body2"、color="text.secondary"） |
| 権限一覧 | List | 出力 | 利用可能機能の一覧（dense、CheckIcon付き） |
| 区切り線 | Divider | 出力 | ロール間の区切り線 |

### 表示データ構造

#### ロール情報定義
```typescript
interface RolePermission {
  id: string;           // ロールID
  name: string;         // 表示名
  description: string;  // 説明文
  permissions: string[]; // 利用可能機能一覧
}
```

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 権限情報表示 | コンポーネントマウント | rolePermissions配列のレンダリング | 同画面 | なし |
