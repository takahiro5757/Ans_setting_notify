# 1. 画面名

---

**代理店・イベント管理（Agency & Event Management）**

---

# 2. 要素別仕様

---

## 2-1. 2段階タブナビゲーション

### 上位タブ（代理店選択）

#### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 代理店追加ボタン | Button | 入力 | 新しい代理店を追加（variant="outlined"） |
| 代理店選択タブ | Tabs | 入力 | 管理対象代理店の選択 |

#### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 代理店追加 | 追加ボタンクリック | 新規代理店追加ダイアログ表示 | 代理店編集ダイアログ | なし |
| 代理店選択 | タブクリック | 対象代理店の選択・下位タブの有効化 | 同画面 | なし |

### 下位タブ（機能選択）

#### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 代理店基本情報タブ | Tab | 入力 | 代理店の基本情報管理 |
| 店舗マスタタブ | Tab | 入力 | 代理店所属店舗の管理 |
| イベントマスタタブ | Tab | 入力 | イベント場所・料金設定管理 |
| レイヤー管理タブ | Tab | 入力 | 代理店階層管理 |
| 組織図タブ | Tab | 入力 | 代理店組織構造表示 |

#### タブ無効化制御

- 代理店未選択時：全下位タブが無効化（opacity: 0.5, pointerEvents: none）
- 代理店選択時：全下位タブが有効化

---

## 2-2. 代理店基本情報タブ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 編集ボタン | Button | 入力 | 代理店情報の編集（variant="contained"） |
| 削除ボタン | Button | 入力 | 代理店の削除（variant="outlined", color="error"） |
| 会社名表示 | Typography | 出力 | 代理店会社名の表示 |
| 住所表示 | Typography | 出力 | 代理店住所の表示 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 代理店編集 | 編集ボタンクリック | 代理店編集ダイアログ表示 | 代理店編集ダイアログ | なし |
| 代理店削除 | 削除ボタンクリック | 代理店削除確認ダイアログ表示 | 削除確認ダイアログ | なし |

---

## 2-3. 店舗マスタタブ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 店舗追加ボタン | Button | 入力 | 新しい店舗を追加（variant="contained"） |
| 店舗一覧 | Accordion | 出力 | 代理店所属店舗のアコーディオン表示 |
| 編集ボタン | IconButton | 入力 | 個別店舗情報の編集 |
| 削除ボタン | IconButton | 入力 | 店舗情報の削除 |

### 店舗アコーディオン表示内容

#### 基本情報セクション（左側）

| 項目名 | 表示内容 | 説明 |
| --- | --- | --- |
| 住所 | 店舗住所 | 店舗所在地の詳細 |
| 電話番号 | 連絡先電話番号 | 店舗代表電話番号 |
| 営業時間 | 営業時間 | 店舗営業時間（例: 10:00-20:00） |

#### 店舗責任者セクション（右側）

| 項目名 | 表示内容 | 説明 |
| --- | --- | --- |
| 責任者 | 責任者氏名 | 店舗責任者の氏名 |
| 役職 | 責任者役職 | 責任者の役職（例: 営業担当） |
| 電話 | 責任者電話番号 | 責任者直通電話番号 |

#### 見積送付先セクション

| 項目名 | 表示内容 | 説明 |
| --- | --- | --- |
| TO | TO送付先一覧 | メイン送付先の担当者名とメールアドレス |
| CC | CC送付先一覧 | CC送付先の担当者名とメールアドレス |

#### 請求送付先セクション

| 項目名 | 表示内容 | 説明 |
| --- | --- | --- |
| TO | TO送付先一覧 | メイン送付先の担当者名とメールアドレス |
| CC | CC送付先一覧 | CC送付先の担当者名とメールアドレス |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 店舗追加 | 追加ボタンクリック | 新規店舗追加ダイアログ表示 | 店舗編集ダイアログ | なし |
| 店舗編集 | 編集ボタンクリック | 店舗編集ダイアログ表示 | 店舗編集ダイアログ | なし |
| 店舗削除 | 削除ボタンクリック | 店舗情報の削除 | 同画面 | 削除確認 |

---

## 2-4. イベントマスタタブ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 場所追加ボタン | Button | 入力 | 新しいイベント場所を追加（variant="contained"） |
| イベント場所一覧 | Accordion | 出力 | イベント場所の一覧表示 |
| 編集ボタン | IconButton | 入力 | 個別場所情報の編集 |
| 削除ボタン | IconButton | 入力 | 場所情報の削除 |

### アコーディオン表示内容

| 項目 | 表示内容 | 説明 |
| --- | --- | --- |
| 場所名 | イベント場所名 | イベント実施場所名 |
| 住所 | 場所住所 | イベント場所の住所 |
| 曜日設定 | 実施可能曜日 | チップ表示での曜日一覧 |
| 料金設定 | クローザー・ガール料金 | 平日・休日別料金設定 |
| 場所詳細 | 詳細場所一覧 | 同一場所内の詳細エリア |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 場所追加 | 追加ボタンクリック | 新規場所追加ダイアログ表示 | 場所編集ダイアログ | なし |
| 場所編集 | 編集ボタンクリック | 場所編集ダイアログ表示 | 場所編集ダイアログ | なし |
| 場所削除 | 削除ボタンクリック | 場所情報の削除 | 同画面 | 削除確認 |

---

## 2-5. レイヤー管理タブ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| レイヤー階層表示 | Accordion | 出力 | 4階層のレイヤー構造表示 |
| 担当者追加ボタン | IconButton | 入力 | 各レイヤーへの担当者追加 |
| 担当者編集ボタン | IconButton | 入力 | 担当者情報の編集 |
| 担当者削除ボタン | IconButton | 入力 | 担当者情報の削除 |

### レイヤー階層構造

| レイヤー | 名称 | 説明 | 店舗管理 |
| --- | --- | --- | --- |
| Layer1 | 第1階層 | 最上位レイヤー | 管理下店舗（部下の担当店舗を集約） |
| Layer2 | 第2階層 | 第1階層の下位 | 管理下店舗（部下の担当店舗を集約） |
| Layer3 | 第3階層 | 第2階層の下位 | 管理下店舗（部下の担当店舗を集約） |
| Layer4 | 第4階層 | 最下位レイヤー | 直接担当店舗（店舗選択機能あり） |

### 階層的店舗管理の仕組み

- **レイヤー4**: 直接店舗を担当し、店舗選択機能で担当店舗を設定
- **レイヤー1-3**: 店舗選択機能なし、部下の担当店舗を自動的に管理下として集約表示

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 担当者追加 | 追加ボタンクリック | レイヤー担当者追加ダイアログ表示 | 担当者編集ダイアログ | なし |
| 担当者編集 | 編集ボタンクリック | 担当者編集ダイアログ表示 | 担当者編集ダイアログ | なし |
| 担当者削除 | 削除ボタンクリック | 担当者情報の削除 | 同画面 | 削除確認 |

---

## 2-6. 組織図タブ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 組織図表示エリア | Box | 出力 | 代理店の組織構造を視覚的に表示 |

### 表示内容

| 項目 | 表示形式 | 説明 |
| --- | --- | --- |
| レイヤー構造 | 階層表示 | 4階層のレイヤー構造を縦に配置 |
| 担当者配置 | カード表示 | 各レイヤーの担当者情報をカード形式で表示 |
| 店舗配置 | 直接配置 | レイヤー4担当者の直下に担当店舗カードを配置 |

### 組織図レイアウト仕様

- **レイヤー1-3**: 担当者カードのみ表示（階層順に配置）
- **レイヤー4**: 担当者カードの直下に担当店舗カードを配置
- **間隔調整**: 担当者と店舗間のgapを最小限（gap: 1）に設定
- **不要テキスト削除**: 「店舗管理構成」「直接担当店舗」等のラベル文字は非表示

---

## 2-7. 代理店編集ダイアログ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 会社名 | TextField | 入力 | 代理店会社名（必須） |
| 住所 | TextField | 入力 | 代理店住所（必須） |
| 保存ボタン | Button | 入力 | 変更内容を保存 |
| キャンセルボタン | Button | 入力 | 変更をキャンセル |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 保存実行 | 保存ボタンクリック | 代理店情報の保存 | 代理店基本情報タブ | 必須項目チェック |
| キャンセル | キャンセルボタンクリック | 変更をキャンセル | 代理店基本情報タブ | なし |

---

## 2-8. 店舗編集ダイアログ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 店舗名 | TextField | 入力 | 店舗名（必須） |
| 電話番号 | TextField | 入力 | 店舗電話番号（必須） |
| 住所 | TextField | 入力 | 店舗住所（必須） |
| 責任者 | TextField | 入力 | 店舗責任者名 |
| 営業時間 | TextField | 入力 | 営業時間（例: 10:00-20:00） |
| 見積送付先情報セクション | Box | 入力 | 見積送付先の追加・管理 |
| 請求送付先情報セクション | Box | 入力 | 請求送付先の追加・管理 |
| 保存ボタン | Button | 入力 | 変更内容を保存 |
| キャンセルボタン | Button | 入力 | 変更をキャンセル |

### 送付先情報管理セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 送付先追加ボタン | Button | 入力 | 新しい送付先を追加 |
| 送付種別 | Select | 入力 | To/Ccの選択 |
| 姓 | TextField | 入力 | 担当者の姓 |
| 名 | TextField | 入力 | 担当者の名 |
| メールアドレス | TextField | 入力 | 担当者メールアドレス |
| 削除ボタン | IconButton | 入力 | 送付先情報の削除 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 見積送付先追加 | 見積追加ボタンクリック | 新しい見積送付先フィールドを追加 | 同ダイアログ | なし |
| 請求送付先追加 | 請求追加ボタンクリック | 新しい請求送付先フィールドを追加 | 同ダイアログ | なし |
| 送付先削除 | 削除ボタンクリック | 送付先フィールドを削除 | 同ダイアログ | なし |
| 送付種別変更 | セレクト変更 | To/Ccの送付種別を変更 | 同ダイアログ | なし |
| 保存実行 | 保存ボタンクリック | 店舗情報の保存 | 店舗マスタタブ | 必須項目チェック |
| キャンセル | キャンセルボタンクリック | 変更をキャンセル | 店舗マスタタブ | なし |

---

## 2-9. イベント場所編集ダイアログ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| イベント実施場所 | TextField | 入力 | イベント場所名（必須） |
| 住所 | TextField | 入力 | 場所住所（必須） |
| 最寄駅 | TextField | 入力 | 最寄駅名 |
| 実施可能曜日 | Checkbox | 入力 | 曜日別の実施可否設定 |
| クローザー平日料金 | TextField | 入力 | クローザー平日単価 |
| クローザー休日料金 | TextField | 入力 | クローザー休日単価 |
| ガール平日料金 | TextField | 入力 | ガール平日単価 |
| ガール休日料金 | TextField | 入力 | ガール休日単価 |
| 場所詳細追加ボタン | Button | 入力 | 詳細場所を追加 |
| 場所詳細一覧 | Box | 入力 | 詳細場所の管理 |
| 保存ボタン | Button | 入力 | 変更内容を保存 |
| キャンセルボタン | Button | 入力 | 変更をキャンセル |

### 注意事項

- 代理店は既に上位タブで選択されているため、ダイアログ内では選択不要
- 新規追加時は選択中の代理店に自動的に紐づけられる
- 編集時は既存の代理店との紐づけを維持

### 場所詳細管理

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 詳細場所名 | TextField | 入力 | 詳細場所名 |
| 削除ボタン | IconButton | 入力 | 詳細場所の削除 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 場所詳細追加 | 追加ボタンクリック | 新しい詳細場所フィールドを追加 | 同ダイアログ | なし |
| 場所詳細削除 | 削除ボタンクリック | 詳細場所フィールドを削除 | 同ダイアログ | なし |
| 保存実行 | 保存ボタンクリック | 場所情報の保存 | イベントマスタタブ | 必須項目チェック |
| キャンセル | キャンセルボタンクリック | 変更をキャンセル | イベントマスタタブ | なし |

---

## 2-10. レイヤー担当者編集ダイアログ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 担当者名 | TextField | 入力 | 担当者氏名（必須） |
| 役職 | TextField | 入力 | 担当者役職 |
| 電話番号 | TextField | 入力 | 担当者電話番号 |
| メールアドレス | TextField | 入力 | 担当者メールアドレス |
| 担当店舗選択 | Checkbox | 入力 | 担当店舗の複数選択（レイヤー4のみ表示） |
| 上位担当者選択 | Select | 入力 | 上位レイヤー担当者の選択 |
| 保存ボタン | Button | 入力 | 変更内容を保存 |
| キャンセルボタン | Button | 入力 | 変更をキャンセル |

### レイヤー別UI制御

| レイヤー | 担当店舗選択 | 説明 |
| --- | --- | --- |
| レイヤー4 | 表示・選択可能 | チェックボックス形式で店舗を複数選択 |
| レイヤー1-3 | 非表示 | 店舗選択UIは表示されない（部下の店舗を自動集約） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 保存実行 | 保存ボタンクリック | 担当者情報の保存 | レイヤー管理タブ | 必須項目チェック |
| キャンセル | キャンセルボタンクリック | 変更をキャンセル | レイヤー管理タブ | なし |