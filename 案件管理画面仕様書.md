# 1. 画面名

---

**案件管理画面（Sales Management）**

![案件管理画面.png](案件管理画面.png)

---

# 2. 要素別仕様

---

## 2-1. ヘッダー部（表示切り替えエリア）

![ヘッダー部.png](ヘッダー部.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 年月選択セレクター | DropDownセレクター | 入力 | 年・月を個別選択（YearMonthSelector） |
| 週選択セレクター | ToggleButtonGroup | 入力 | 選択月の週を選択（WeekSelector、火曜日スタート） |
| 詳細表示ボタン | ToggleButton | 入力 | 詳細ビューに切り替える（ViewListIcon） |
| サマリー表示ボタン | ToggleButton | 入力 | サマリービューに切り替える（ViewModuleIcon） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 年月変更 | セレクター選択 | 選択年月のデータ表示 | 同画面 | なし |
| 週変更 | ToggleButton選択 | 選択週のデータ表示 | 同画面 | なし |
| 表示切り替え | ToggleButton選択 | 詳細/サマリー表示の切り替え | 同画面 | なし |

---

## 2-2. 週別サマリー（WeeklySummary）

![週別サマリー.png](週別サマリー.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| フィルター切り替え | ToggleButtonGroup | 入力 | すべて/平日のみ/週末のみ切り替え |
| クローザー枠数表 | Table | 出力 | 週別＋月間合計のクローザー枠数表示 |
| ガール枠数表 | Table | 出力 | 週別＋月間合計のガール枠数表示 |
| 無料入場枠数表 | Table | 出力 | 週別＋月間合計の無料入場枠数表示 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| フィルター変更 | ToggleButtonクリック | 表示フィルター切り替え | 同画面 | なし |

---

## 2-3. 新規追加ボタン

![新規追加ボタン.png](新規追加ボタン.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| + 新規追加ボタン | プライマリボタン | 入力 | 新規案件追加ダイアログを開く |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 新規追加 | ボタンクリック | AddRecordDialogを表示 | ダイアログ表示 | なし |

---

## 2-4. 案件一覧テーブル（詳細ビュー）

![案件一覧テーブル詳細.png](案件一覧テーブル詳細.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 編集アイコン | IconButton | 入力 | 編集モード切り替え（編集中はチェックアイコン） |
| 担当者列 | クリッカブルテキスト | 入力/出力 | 担当者選択（ポップアップ） |
| 更新者列 | テキスト | 出力 | 最終更新者名表示 |
| ステータス列 | クリッカブルChip | 入力/出力 | ステータス選択（ポップアップ） |
| 代理店列 | クリッカブルテキスト | 入力/出力 | 代理店選択（ポップアップ） |
| 詳細情報列 | Chip+ボタン | 入力/出力 | 公開状態＋詳細ドロワーリンク |
| 日付列（火〜月） | CheckIcon | 入力/出力 | 稼働日設定（編集時クリック可） |
| 曜日列 | テキスト | 入力/出力 | 平日/週末/帯表示（編集時クリック可） |
| 帯案件列 | CheckIcon+数値 | 入力/出力 | 帯案件設定＋日数（編集時入力可） |
| 場所取りフラグ | アイコン+ボタン | 入力/出力 | 場所取りON/OFF＋詳細ボタン（編集時のみ） |
| 外現場フラグ | アイコン+テキスト | 入力/出力 | 外現場フラグON/OFF（編集時クリック可） |
| 出張フラグ | アイコン+テキスト | 入力/出力 | 出張フラグON/OFF（編集時クリック可） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 編集モード開始 | 編集アイコンクリック | 行の編集モード有効化 | 同画面 | なし |
| 編集モード終了 | チェックアイコンクリック | 編集内容保存＋編集モード解除 | 同画面 | 入力値検証 |
| 担当者変更 | 担当者テキストクリック | 担当者選択ポップアップ表示 | ポップアップ | なし |
| ステータス変更 | ステータスChipクリック | ステータス選択ポップアップ表示 | ポップアップ | なし |
| 代理店変更 | 代理店テキストクリック | 代理店選択ポップアップ表示 | ポップアップ | なし |
| 詳細情報表示 | 詳細情報ボタンクリック | SalesDetailDrawer表示 | ドロワー表示 | なし |
| 稼働日変更 | 日付列クリック（編集時） | 稼働日ON/OFF切り替え | 同画面 | 編集モード時のみ |
| 曜日変更 | 曜日列クリック（編集時） | 平日/週末切り替え | 同画面 | 編集モード時のみ |
| 帯案件変更 | 帯案件列クリック（編集時） | 帯案件ON/OFF切り替え | 同画面 | 編集モード時のみ |
| 場所取り詳細表示 | 場所取りクリック（表示時） | 場所取り詳細ツールチップ表示 | ツールチップ | 場所取りON時のみ |
| 場所取り詳細編集 | 詳細ボタンクリック（編集時） | LocationReservationModal表示 | モーダル | 編集モード＋場所取りON時のみ |
| フラグ切り替え | フラグクリック（編集時） | 各フラグON/OFF切り替え | 同画面 | 編集モード時のみ |
| 右クリック削除 | 行右クリック | 削除コンテキストメニュー表示 | コンテキストメニュー | なし |

---

## 2-5. 案件一覧テーブル（サマリービュー）

![案件一覧テーブルサマリー.png](案件一覧テーブルサマリー.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 基本情報列 | 詳細ビューと同様 | 入力/出力 | 詳細ビューと同一機能 |
| 詳細列（統合） | 複合要素 | 入力/出力 | イベント場所+フラグ+人数を1列に統合 |
| イベント実施場所 | クリッカブルテキスト | 入力/出力 | 場所選択（編集時ポップアップ） |
| フラグエリア | クリッカブルアイコン群 | 入力/出力 | 場所取り/外現場/出張フラグ（編集時切り替え） |
| クローザー人数 | テキスト/数値入力 | 入力/出力 | 人数表示（編集時TextField） |
| ガール人数 | テキスト/数値入力 | 入力/出力 | 人数表示（編集時TextField） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| イベント場所変更 | 場所テキストクリック（編集時） | 場所選択ポップアップ表示 | ポップアップ | 編集モード時のみ |
| フラグ切り替え | フラグアイコンクリック（編集時） | フラグON/OFF切り替え | 同画面 | 編集モード時のみ |
| 人数変更 | 人数入力（編集時） | 人数リアルタイム更新 | 同画面 | 0-99の数値範囲 |

---

## 2-6. 詳細エリア（詳細ビュー専用）

![詳細エリア.png](詳細エリア.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| イベント実施場所 | テキスト | 出力 | 場所名表示（1.3rem、太字） |
| 担当MG | テキスト | 出力 | 担当マネージャー名・電話番号 |
| 開催店舗 | Chip | 出力 | 青色角丸ラベル（#2196f3背景） |
| 連名店舗 | Chip | 出力 | グレー角丸ラベル（#e0e0e0背景） |
| フラグ | アイコン+テキスト | 出力 | 場所取り（緑）/外現場（オレンジ）/出張（青） |
| 枠集計表 | テーブル | 出力 | 役割・人数・単価・交通費・売上の5列表示 |
| 無料入店 | テーブル | 出力 | 1日目・2日目・3日目の人数表示 |
| 営業担当メモ | テキストエリア | 出力 | メモ内容表示（150px高、#fafafa背景） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 場所取り詳細表示 | 場所取りチップクリック | ツールチップで詳細情報表示 | ツールチップ | なし |

---

## 2-7. 場所取り詳細ツールチップ

![場所取り詳細ツールチップ.png](場所取り詳細ツールチップ.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 場所取りリスト | 情報表示リスト | 出力 | 日付・ステータス・手配会社・金額の一覧 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| ツールチップ閉じ | 外側クリック/マウスアウト | ツールチップ非表示 | 元画面 | なし |

---

## 2-8. 場所取り詳細モーダル（LocationReservationModal）

![場所取り詳細モーダル.png](場所取り詳細モーダル.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 場所取り明細テーブル | 編集可能テーブル | 入出力 | 日付・ステータス・会社・商品・単価列 |
| 日付列（テーブル内） | DatePicker | 入力 | 日付選択（テーブルセル内） |
| ステータス列（テーブル内） | セレクトボックス | 入力 | 申請中、日程NG、通信NG、代理店確認中、確定（固定値） |
| 会社列（テーブル内） | セレクトボックス | 入力 | 代理店データより取得 |
| 商品列（テーブル内） | テキスト入力 | 入力 | 商品名入力 |
| 単価列（テーブル内） | 数値入力 | 入力 | 単価入力 |
| 行追加ボタン | ボタン | 操作 | テーブル行の追加 |
| 行削除ボタン | ボタン | 操作 | テーブル行の削除 |
| 保存ボタン | ボタン | 操作 | 変更内容保存 |
| キャンセルボタン | ボタン | 操作 | 変更取り消し+モーダル閉じ |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| レコード追加 | + 追加ボタンクリック | 新規場所取りレコード追加 | 同モーダル | なし |
| 値変更 | 各フィールド入力 | リアルタイム値更新 | 同モーダル | 数値フィールドは数値のみ |
| レコード削除 | 削除ボタンクリック | 該当レコード削除 | 同モーダル | なし |
| 登録実行 | 登録ボタンクリック | 変更保存＋モーダル閉じ | 元画面 | なし |
| キャンセル | キャンセルボタンクリック | モーダル閉じ（変更破棄） | 元画面 | なし |

---

## 2-9. 選択ポップアップ（SelectionPopups）

![選択ポップアップ.png](選択ポップアップ.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 担当者選択 | ボタンリスト | 入力 | 担当者データより取得 |
| ステータス選択 | Chipボタンリスト | 入力 | 起票、連絡前、連絡済、連絡不要、お断り（固定値） |
| 代理店選択 | ボタンリスト | 入力 | 代理店データより取得 |
| イベント場所選択 | ボタンリスト | 入力 | イベント会場データより取得 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 選択確定 | 項目ボタンクリック | 選択値をレコードに反映＋ポップアップ閉じ | 元画面 | なし |
| ポップアップ閉じ | 背景クリック/ESCキー | ポップアップ閉じ（変更なし） | 元画面 | なし |

---

## 2-10. 新規追加ダイアログ（AddRecordDialog）

![新規追加ダイアログ.png](新規追加ダイアログ.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| イベント開催日選択 | チェックボックスグリッド | 入力 | 火〜月の7日間から複数選択 |
| 担当者選択 | セレクトボックス | 入力 | 担当者データより取得 |
| 代理店選択 | セレクトボックス | 入力 | 代理店データより取得 |
| 平日/週末選択 | ラジオボタン | 入力 | 平日、週末（固定値） |
| 帯案件設定 | チェックボックス+数値入力 | 入力 | 帯案件フラグ＋稼働日数（デフォルト20日） |
| イベント実施場所 | セレクトボックス | 入力 | イベント会場データより取得 |
| 担当MG | セレクトボックス | 入力 | 担当MGデータより取得（名前＋電話番号） |
| 開催店舗 | チップ＋セレクト | 入力 | 店舗データより取得（単一選択、青色チップ表示） |
| 連名店舗 | チップ＋セレクト | 入力 | 店舗データより取得（複数選択、グレーチップ表示） |
| 人数/単価設定 | 数値入力グループ | 入力 | クローザー・ガール別の人数・単価・交通費 |
| フラグ設定 | チェックボックスグループ | 入力 | 場所取り・外現場・出張フラグ |
| 場所取り詳細 | 動的カードリスト | 入力 | 場所取りフラグON時に表示される詳細設定 |
| 場所取りステータス | セレクトボックス | 入力 | 申請中、日程NG、通信NG、代理店確認中、確定（固定値） |
| 現場連絡先 | テキスト入力グループ | 入力 | 名前・電話番号入力フィールド |
| 集合情報 | 時間・テキスト入力 | 入力 | 集合時間（time型）・集合場所（テキスト） |
| 稼働時間 | 時間入力グループ | 入力 | 稼働開始時間・稼働終了時間（time型） |
| 服装 | テキスト入力 | 入力 | 服装要件入力 |
| 目標 | テキスト入力 | 入力 | 目標設定入力 |
| メモ | テキストエリア | 入力 | 営業担当メモ入力 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 開催日選択 | チェックボックスクリック | 開催日追加/削除 | 同ダイアログ | なし |
| 帯案件切り替え | 帯案件チェック | 平日/週末選択無効化 | 同ダイアログ | なし |
| 場所取り詳細表示 | 場所取りチェック | 場所取り詳細エリア表示/非表示 | 同ダイアログ | なし |
| 場所取り詳細追加 | 追加ボタンクリック | 新しい場所取りカード追加 | 同ダイアログ | なし |
| 場所取り詳細削除 | 削除ボタンクリック | 該当カード削除 | 同ダイアログ | なし |
| 現場情報入力 | フィールド入力 | 現場連絡先・集合・稼働時間等の入力 | 同ダイアログ | なし |
| 登録実行 | 登録ボタンクリック | 新規案件作成＋ダイアログ閉じ | 元画面 | イベント開催日必須 |
| キャンセル | キャンセルボタンクリック | ダイアログ閉じ（変更破棄） | 元画面 | なし |

---

## 2-11. 詳細情報ドロワー（SalesDetailDrawer）

![詳細情報ドロワー.png](詳細情報ドロワー.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 基本情報セクション | - | - | 編集可能な基本項目群 |
| 担当者編集 | セレクトボックス | 入力 | 担当者データより取得 |
| 代理店編集 | セレクトボックス | 入力 | 代理店データより取得 |
| ステータス編集 | セレクトボックス | 入力 | 起票、連絡前、連絡済、連絡不要、お断り（固定値） |
| 詳細ステータス編集 | セレクトボックス | 入力 | 未登録、公開済み（固定値） |
| 平日/週末編集 | セレクトボックス | 入力 | 平日、週末（固定値） |
| イベント実施場所編集 | セレクトボックス | 入力 | イベント会場データより取得 |
| 担当MG編集 | セレクトボックス | 入力 | 担当MGデータより取得 |
| 店舗情報セクション | - | - | 開催店舗・連名店舗の編集 |
| 開催店舗編集 | セレクトボックス | 入力 | 店舗データより取得 |
| 連名店舗編集 | マルチセレクト | 入力 | 店舗データより取得（複数選択） |
| 現場情報セクション | - | - | 現場詳細情報の編集 |
| 現場連絡先編集 | テキスト入力 | 入力 | 名前・電話番号 |
| 他社編集 | テキスト入力 | 入力 | 他社情報 |
| 常勤編集 | テキスト入力 | 入力 | 常勤情報 |
| 集合時間編集 | 時間入力 | 入力 | 集合時間（time型） |
| 集合場所編集 | テキスト入力 | 入力 | 集合場所 |
| 稼働開始時間編集 | 時間入力 | 入力 | 稼働開始時間（time型） |
| 稼働終了時間編集 | 時間入力 | 入力 | 稼働終了時間（time型） |
| 服装編集 | テキスト入力 | 入力 | 服装要件 |
| 目標編集 | テキスト入力 | 入力 | 目標設定 |
| 特記事項編集 | テキストエリア | 入力 | 特記事項・メモ |
| 人数単価セクション | - | - | クローザー・ガール別設定 |
| 人数編集 | 数値入力 | 入力 | 人数設定 |
| 単価編集 | 数値入力 | 入力 | 単価設定 |
| 交通費編集 | 数値入力 | 入力 | 交通費設定 |
| フラグセクション | - | - | 各種フラグ設定 |
| 場所取りフラグ | チェックボックス | 入力 | 場所取り要否 |
| 外現場フラグ | チェックボックス | 入力 | 外現場要否 |
| 出張フラグ | チェックボックス | 入力 | 出張要否 |
| 帯案件フラグ | チェックボックス | 入力 | 帯案件要否 |
| 帯稼働日数 | 数値入力 | 入力 | 帯案件の稼働日数 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 詳細編集切り替え | 編集ボタンクリック | 詳細編集モード切り替え | 同ドロワー | なし |
| 公開状態変更 | 公開切り替えボタンクリック | 公開/非公開状態変更 | 同ドロワー | なし |
| スケジュール変更 | チェックボックスクリック | 稼働予定変更 | 同ドロワー | なし |
| 場所取り詳細編集 | 場所取りボタンクリック | LocationReservationModal表示 | モーダル | なし |
| 現場情報編集 | 現場情報フィールド入力 | 現場連絡先・集合・稼働時間等の更新 | 同ドロワー | なし |
| コミュニケーション送信 | メッセージ送信 | コミュニケーション履歴追加 | 同ドロワー | なし |
| ドロワー閉じ | 閉じるボタンクリック/背景クリック | ドロワー非表示 | 元画面 | なし |

---

## 2-12. コミュニケーションパネル（CommunicationPanel）

![コミュニケーションパネル.png](コミュニケーションパネル.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| メッセージ入力欄 | TextField | 入力 | 新規メッセージ入力 |
| 送信ボタン | IconButton | 入力 | メッセージ送信（SendIcon） |
| メッセージリスト | タイムライン | 出力 | メッセージ履歴表示（再帰的構造対応） |
| いいねボタン | IconButton | 入力 | メッセージにいいね（ThumbUpIcon） |
| リプライボタン | IconButton | 入力 | メッセージにリプライ（ReplyIcon） |
| 編集ボタン | IconButton | 入力 | メッセージ編集（EditIcon） |
| 削除ボタン | IconButton | 入力 | メッセージ削除（DeleteIcon） |
| リプライ入力欄 | TextField | 入力 | リプライメッセージ入力 |
| リプライ送信ボタン | Button | 入力 | リプライ送信 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| メッセージ送信 | 送信ボタンクリック | 新規メッセージ投稿 | 同パネル | 空文字チェック |
| いいね | いいねボタンクリック | メッセージにいいね追加/削除 | 同パネル | なし |
| リプライ開始 | リプライボタンクリック | リプライ入力モード開始 | 同パネル | なし |
| リプライ送信 | リプライ送信ボタンクリック | リプライメッセージ投稿 | 同パネル | 空文字チェック |
| メッセージ編集 | 編集ボタンクリック | メッセージ編集モード開始 | 同パネル | なし |
| メッセージ削除 | 削除ボタンクリック | 削除確認→メッセージ削除 | 同パネル | 削除確認ダイアログ |

---

## 2-13. 削除確認ダイアログ（DeleteConfirmDialog）

![削除確認ダイアログ.png](削除確認ダイアログ.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 確認メッセージ | テキスト | 出力 | 削除確認メッセージ表示 |
| キャンセルボタン | セカンダリボタン | 入力 | 削除キャンセル |
| 削除実行ボタン | 危険ボタン | 入力 | 削除実行（赤色ボタン） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 削除実行 | 削除ボタンクリック | レコード削除＋ダイアログ閉じ | 元画面 | なし |
| 削除キャンセル | キャンセルボタンクリック | ダイアログ閉じ（削除なし） | 元画面 | なし |

---

## 2-14. 右クリックコンテキストメニュー

![コンテキストメニュー.png](コンテキストメニュー.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 削除メニュー項目 | メニューアイテム | 入力 | 削除アクション（赤色テキスト） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 削除選択 | 削除メニュークリック | 削除確認ダイアログ表示 | 削除確認ダイアログ | なし |
| メニュー閉じ | 背景クリック/ESCキー | コンテキストメニュー非表示 | 元画面 | なし |

---

# 3. その他仕様（要素に収まらない共通ルールや制約）

## 3-1. レイアウト・表示設計

- **固定表示**: ヘッダー部（年月選択・週選択・表示切り替え・新規追加ボタン）は画面上部に固定（sticky）
- **右上固定**: WeeklySummaryコンポーネントは画面右上に絶対配置（position: absolute）
- **テーブル設計**: 横幅2000pxでスクロール対応、列幅は詳細・サマリーで統一
- **レスポンシブ**: デスクトップファースト、最小横幅1200px推奨

## 3-2. カラー設計

- **ステータス色**: 
  - 起票（グレー #9e9e9e）
  - 連絡前（オレンジ #ff9800）
  - 連絡済（緑 #4caf50）
  - 連絡不要（青 #2196f3）
  - お断り（赤 #f44336）
- **代理店色**: 
  - ピーアップ（ティール #009688）
  - ラネット（パープル #9c27b0）
  - CS（グリーン #4caf50）
  - エージェントA（インディゴ #3f51b5）
  - マーケティング会社B（ディープオレンジ #ff5722）
- **日付列色**: 
  - 平日（通常背景）
  - 土曜日（青系 #e3f2fd背景）
  - 日曜日（赤系 #ffebee背景）
- **特殊表示色**: 
  - 帯案件: 曜日列で「帯」表示時は薄い青（#e3f2fd）背景、青文字（#1976d2）
  - 編集中レコード: 薄いオレンジ（#fff3e0）背景

## 3-3. インタラクション設計

- **編集モード**: 
  - 編集中レコードは薄いオレンジ（#fff3e0）背景
  - 編集可能要素はホバー時に視覚フィードバック
  - 編集モード時のみクリック操作可能な要素あり
- **ポップアップ仕様**: 
  - クリック位置基準で表示
  - 透明背景
  - 120px固定幅
  - ESCキー・背景クリックで閉じる
- **ドロワー仕様**: 
  - 右スライドイン形式
  - 幅900px
  - 背景はオーバーレイ
- **モーダル仕様**:
  - LocationReservationModal: 最小幅900px、最大高さ80vh
  - 中央配置、背景オーバーレイ

## 3-4. 状態管理

- **編集状態**: editingRecord（編集中レコードID）, hoveredRow（ホバー中行）
- **ポップアップ状態**: assignedUserPopup, statusPopup, agencyPopup, eventLocationPopup
- **ダイアログ・モーダル状態**: addRecord, deleteConfirm, detailDrawer, locationReservationModal
- **コミュニケーション状態**: replyingTo, editingMessage, deleteConfirm（メッセージ用）

## 3-5. データ整合性・ビジネスルール

- **帯案件制約**: 帯案件ONの場合、平日/週末選択を無効化、曜日列に「帯」表示
- **場所取り制約**: 場所取りフラグON時のみ詳細設定表示・編集可能
- **削除制約**: 削除時の確認ダイアログ必須（案件削除・コミュニケーション削除共通）
- **編集制約**: 編集モード時のみ各フィールドの変更操作可能

## 3-6. アクセシビリティ・UX

- **WCAG 2.2 AA準拠**: 色コントラスト4.5:1以上、キーボード操作対応
- **アニメーション**: Material-UIデフォルトのトランジション、300ms以下推奨
- **フォーカス管理**: タブキーでの適切なフォーカス移動、ESCキーでモーダル・ポップアップ閉じ
- **視覚フィードバック**: ホバー効果、選択状態の明確な表示

## 3-7. パフォーマンス・技術仕様

- **最適化**: React.memo適用検討、イミュータブルな状態更新
- **型安全性**: TypeScript厳密型チェック、全propsの型定義
- **コンポーネント分割**: 機能単位での適切なコンポーネント分離

## 3-8. エラーハンドリング・バリデーション

- **入力値検証**: 
  - 人数フィールド: 0-99の数値範囲
  - 必須項目: イベント開催日（新規追加時）
  - 文字列フィールド: 空文字チェック（コミュニケーション送信時）
- **API通信エラー**: 適切なエラーメッセージ表示
- **ネットワークエラー**: リトライ機能（今後実装予定）

## 3-9. 将来拡張・制限事項

- **今後の拡張予定**: 
  - 同時編集時のロック制御
  - 大量データ表示時のページネーション
  - リアルタイム通知機能
- **現在の制限**: 
  - クライアントサイドでのデータ管理（永続化なし）
  - 単一ユーザー環境想定
  - データバックアップ機能未実装

## 3-10. 重要な実装詳細

- **日時フォーマット**: コミュニケーション時刻は時間のみ表示（今日）、日付+時間表示（別日）
- **再帰構造**: コミュニケーションパネルはリプライの再帰的表示に対応
- **絶対配置**: サマリービューの詳細列は絶対配置によるレイアウト制御（X座標固定）
- **条件表示**: 編集モード時のみ表示される要素多数（詳細ボタン、入力フィールド等）
- **WeeklySummary配置**: 画面右上に絶対配置（position: absolute）、3つのフィルター（すべて/平日のみ/週末のみ）でクローザー・ガール・無料枠数を週別表示
- **現場情報詳細**: 新規追加ダイアログと詳細ドロワーで現場連絡先・他社・常勤・集合情報・稼働時間・服装・目標・特記事項の詳細入力/編集が可能
- **データ型完全性**: fieldContactName, fieldContactPhone, otherCompany, regularStaff, meetingTime, meetingPlace, workStartTime, workEndTime, uniform, target, specialNotes 等の詳細フィールドが全て実装済み 