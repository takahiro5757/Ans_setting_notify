# 設定画面 画面仕様書

## 概要

**画面名**: 設定画面  
**URL**: `/settings`  
**目的**: ANSTEYPEの携帯販売営業管理システムにおける包括的な設定管理画面  
**システム概要**: 代理店・2次請会社・スタッフ・案件の一元管理とシステム運用設定

### ビジネス構造
**SoftBank → 代理店（ABC代理店、DEF広告等） → Ansteype（1次請） → 2次請会社**

### 対象ユーザー権限レベル
1. **経営管理者** - 全システム管理権限
2. **営業管理** - 案件管理・シフト調整・代理店管理
3. **一般管理** - 限定的な管理機能
4. **経理** - 経理関連設定・請求管理
5. **2次請管理者** - 自社（2次請会社）の管理
6. **2次請ユーザー** - 自社の限定的な操作

---

## 1. 画面レイアウト設計

### 1.1 全体構成

```
┌─────────────────────────────────────────────────────────┐
│ ヘッダー（固定）                                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────┐  ┌───────────────────────────────┐    │
│  │             │  │                               │    │
│  │             │  │                               │    │
│  │   サイド     │  │          メイン設定エリア        │    │
│  │  ナビゲーション │  │                               │    │
│  │             │  │                               │    │
│  │             │  │                               │    │
│  │             │  │                               │    │
│  └─────────────┘  └───────────────────────────────┘    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 1.2 レスポンシブ対応

- **デスクトップ**: 2カラムレイアウト（サイドナビ + メインエリア）
- **タブレット**: 1カラムレイアウト（上部タブナビ + メインエリア）
- **スマートフォン**: アコーディオン形式

---

## 2. サイドナビゲーション設計

### 2.1 設定カテゴリ

| カテゴリ | アイコン | 説明 | 主な権限 |
|---------|---------|------|---------|
| 👤 ユーザー情報 | PersonIcon | 個人プロフィール設定 | 全ユーザー |
| 👥 スタッフ管理 | PeopleIcon | 自社・2次請スタッフの統合管理 | 経営管理者・営業管理・2次請管理者 |
| 🏢 2次請管理 | BusinessIcon | 2次請会社管理者・システム発行 | 経営管理者・営業管理 |
| 📋 代理店・イベント管理 | CampaignIcon | 代理店・イベント場所マスタ管理 | 経営管理者・営業管理 |
| 💰 経理管理 | AccountingIcon | 請求・支払い・テンプレート設定 | 経営管理者・経理 |
| ⚙️ システムユーザー | AdminIcon | システム利用者・権限管理 | 経営管理者のみ |

### 2.2 ナビゲーション実装例

```tsx
const SettingsNavigation = () => {
  const [activeCategory, setActiveCategory] = useState('profile');
  const { userRole } = useAuth(); // ユーザー権限を取得
  
  const categories = [
    { id: 'profile', label: 'ユーザー情報', icon: PersonIcon, roles: ['all'] },
    { id: 'staff', label: 'スタッフ管理', icon: PeopleIcon, roles: ['executive_admin', 'sales_admin', 'subcontractor_admin'] },
    { id: 'subcontractors', label: '2次請管理', icon: BusinessIcon, roles: ['executive_admin', 'sales_admin'] },
    { id: 'projects', label: '代理店・イベント管理', icon: CampaignIcon, roles: ['executive_admin', 'sales_admin'] },
    { id: 'accounting', label: '経理管理', icon: AccountingIcon, roles: ['executive_admin', 'accounting'] },
    { id: 'system_users', label: 'システムユーザー', icon: AdminIcon, roles: ['executive_admin'] },
  ].filter(category => 
    category.roles.includes('all') || category.roles.includes(userRole)
  );

  return (
    <List>
      {categories.map((category) => (
        <ListItem 
          key={category.id}
          button
          selected={activeCategory === category.id}
          onClick={() => setActiveCategory(category.id)}
        >
          <ListItemIcon>
            <category.icon />
          </ListItemIcon>
          <ListItemText primary={category.label} />
        </ListItem>
      ))}
    </List>
  );
};
```

---

## 3. ユーザー情報設定仕様

### 3.1 個人プロフィール設定

| 項目 | 種類 | 必須 | 説明 |
|------|------|------|------|
| 氏名 | TextField | ○ | システム利用者の氏名 |
| 氏名（カナ） | TextField | ○ | 検索・ソート用カナ表記 |
| 最寄り駅 | TextField | - | 通勤・出張時の参考情報 |
| 電話番号 | TextField | ○ | 連絡先電話番号 |
| メールアドレス | TextField | ○ | ログイン用・連絡用 |
| パスワード変更 | PasswordField | - | 現在のパスワード確認後変更 |

### 3.2 実装例

```tsx
const UserProfileSettings = () => {
  const [profileData, setProfileData] = useState({
    name: '',
    nameKana: '',
    nearestStation: '',
    phone: '',
    email: '',
  });

  return (
    <Card>
      <CardHeader title="個人プロフィール設定" />
      <CardContent>
        <Grid container spacing={2}>
          <Grid item xs={12} md={6}>
            <TextField
              label="氏名"
              value={profileData.name}
              onChange={(e) => setProfileData({...profileData, name: e.target.value})}
              required
              fullWidth
            />
          </Grid>
          <Grid item xs={12} md={6}>
            <TextField
              label="氏名（カナ）"
              value={profileData.nameKana}
              onChange={(e) => setProfileData({...profileData, nameKana: e.target.value})}
              required
              fullWidth
            />
          </Grid>
          {/* 他のフィールド */}
        </Grid>
      </CardContent>
    </Card>
  );
};
```

### 3.3 システム発行・管理

```tsx
const SystemManagement = () => {
  const [company, setCompany] = useState(null);
  
  return (
    <Card>
      <CardHeader title="システム発行・管理" />
      <CardContent>
        <Stack spacing={2}>
          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>
            <Chip 
              label={company.systemStatus} 
              color={company.systemStatus === 'active' ? 'success' : 'error'}
            />
            <Typography>システム状態</Typography>
          </Box>
          
          <Button 
            variant="outlined" 
            onClick={generateSystemUrl}
          >
            システムURL発行
          </Button>
          
          <Button 
            variant="outlined" 
            color="warning"
            onClick={suspendSystem}
          >
            システム一時停止
          </Button>
          
          <Button 
            variant="outlined" 
            color="error"
            onClick={deleteSystem}
          >
            システム削除
          </Button>
        </Stack>
      </CardContent>
    </Card>
  );
};
```

### 3.4 登録フォーム実装例

```tsx
const CompanyRegistrationForm = () => {
  const [formData, setFormData] = useState({
    companyName: '',
    companyNameKana: '',
    contactName: '',
    contactEmail: '',
    contactPhone: '',
    salesPerson: '',
    issueSystem: true,
    notes: ''
  });

  const handleSubmit = async () => {
    // 会社情報の登録
    const company = await registerCompany(formData);
    
    // システム発行が有効な場合
    if (formData.issueSystem) {
      await issueSystemForCompany(company.id);
    }
  };

  return (
    <Box component="form" onSubmit={handleSubmit}>
      <TextField
        label="会社名"
        value={formData.companyName}
        onChange={(e) => setFormData({...formData, companyName: e.target.value})}
        required
        fullWidth
        margin="normal"
      />
      {/* 他のフィールド */}
    </Box>
  );
};
```

---

## 4. スタッフ管理仕様

### 4.1 スタッフ統合管理

| 分類 | 説明 | 表示権限 |
|------|------|---------|
| 自社スタッフ | Ansteype社員の管理 | 経営管理者・営業管理 |
| 2次請スタッフ | 各2次請会社スタッフの管理 | 経営管理者・営業管理・該当2次請管理者 |
| 統合表示 | 全スタッフを一元管理 | 経営管理者・営業管理 |

### 4.2 スタッフ登録項目

| 項目 | 種類 | 必須 | 説明 |
|------|------|------|------|
| 所属 | Select | ○ | 自社 / 2次請会社選択 |
| 氏名 | TextField | ○ | スタッフの氏名 |
| 氏名（カナ） | TextField | ○ | 検索・ソート用カナ表記 |
| 最寄り駅 | TextField | - | 交通費計算・配置参考 |
| 電話番号 | TextField | ○ | 緊急連絡先 |
| 役職 | Select | ○ | クローザー・ガール・研修生 |
| 出張可否 | Switch | ○ | 遠方案件への対応可能性 |
| 平日単価 | NumberField | ○ | 2次請→Ansteypeへの請求単価（日給） |
| 土日単価 | NumberField | ○ | 休日の請求単価（日給） |
| メールアドレス | TextField | ○ | ログイン・連絡用 |
| パスワード | PasswordField | ○ | システムログイン用 |

### 4.3 実装例

```tsx
const StaffManagement = () => {
  const [staffData, setStaffData] = useState({
    affiliation: '',
    name: '',
    nameKana: '',
    nearestStation: '',
    phone: '',
    position: '',
    businessTripAvailable: false,
    weekdayRate: 0,
    weekendRate: 0,
    email: '',
    password: ''
  });

  const affiliationOptions = [
    { value: 'ansteype', label: 'Ansteype（自社）' },
    { value: 'subcontractor_1', label: '2次請会社A' },
    { value: 'subcontractor_2', label: '2次請会社B' },
  ];

  const positionOptions = [
    { value: 'closer', label: 'クローザー' },
    { value: 'girl', label: 'ガール' },
    { value: 'trainee', label: '研修生' },
  ];

  return (
    <Card>
      <CardHeader title="スタッフ登録・編集" />
      <CardContent>
        <Grid container spacing={2}>
          <Grid item xs={12}>
            <FormControl fullWidth required>
              <InputLabel>所属</InputLabel>
              <Select value={staffData.affiliation}>
                {affiliationOptions.map(option => (
                  <MenuItem key={option.value} value={option.value}>
                    {option.label}
                  </MenuItem>
                ))}
              </Select>
            </FormControl>
          </Grid>
          
          <Grid item xs={12} md={6}>
            <TextField
              label="平日単価（日給）"
              type="number"
              value={staffData.weekdayRate}
              onChange={(e) => setStaffData({...staffData, weekdayRate: Number(e.target.value)})}
              required
              fullWidth
              InputProps={{
                startAdornment: <InputAdornment position="start">¥</InputAdornment>,
              }}
            />
          </Grid>
          
          <Grid item xs={12} md={6}>
            <TextField
              label="土日単価（日給）"
              type="number"
              value={staffData.weekendRate}
              onChange={(e) => setStaffData({...staffData, weekendRate: Number(e.target.value)})}
              required
              fullWidth
              InputProps={{
                startAdornment: <InputAdornment position="start">¥</InputAdornment>,
              }}
            />
          </Grid>
          
          {/* 他のフィールド */}
        </Grid>
      </CardContent>
    </Card>
  );
};
```

---

## 5. 2次請管理仕様

### 5.1 2次請会社管理者登録

| 項目 | 種類 | 必須 | 説明 |
|------|------|------|------|
| 2次請会社名 | TextField | ○ | 正式な会社名 |
| 管理者氏名 | TextField | ○ | 2次請会社の管理責任者名 |
| 管理者カテゴリ | Select | ○ | 管理者の役職・レベル |
| 管理者メールアドレス | TextField | ○ | ログイン・連絡用 |
| 管理者LINE ID | TextField | - | 連絡手段の一つ |

### 5.2 システム発行・管理

| 機能 | 説明 | 権限 |
|------|------|------|
| システムURL発行 | 2次請会社専用のシステムURLを生成 | 経営管理者・営業管理 |
| システム有効化/無効化 | 発行したシステムの稼働制御 | 経営管理者・営業管理 |
| アクセス状況確認 | ログイン履歴・利用状況の確認 | 経営管理者・営業管理 |
| システム削除 | 契約終了時のシステム完全削除 | 経営管理者のみ |

### 5.3 実装例

```tsx
const SubcontractorManagement = () => {
  const [contractorData, setContractorData] = useState({
    companyName: '',
    adminName: '',
    adminCategory: '',
    adminEmail: '',
    adminLineId: '',
    systemStatus: 'inactive'
  });

  const handleSystemIssue = async () => {
    try {
      const systemUrl = await issueSystemForCompany(contractorData.companyName);
      setContractorData({...contractorData, systemStatus: 'active'});
      console.log('システム発行完了:', systemUrl);
    } catch (error) {
      console.error('システム発行エラー:', error);
    }
  };

  return (
    <Card>
      <CardHeader title="2次請会社管理" />
      <CardContent>
        <Grid container spacing={2}>
          <Grid item xs={12}>
            <TextField
              label="2次請会社名"
              value={contractorData.companyName}
              onChange={(e) => setContractorData({...contractorData, companyName: e.target.value})}
              required
              fullWidth
            />
          </Grid>
          
          <Grid item xs={12} md={6}>
            <TextField
              label="管理者氏名"
              value={contractorData.adminName}
              onChange={(e) => setContractorData({...contractorData, adminName: e.target.value})}
              required
              fullWidth
            />
          </Grid>
          
          <Grid item xs={12}>
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mt: 2 }}>
              <Chip 
                label={contractorData.systemStatus === 'active' ? 'システム稼働中' : 'システム停止中'}
                color={contractorData.systemStatus === 'active' ? 'success' : 'error'}
              />
              
              <Button 
                variant="contained" 
                onClick={handleSystemIssue}
                disabled={contractorData.systemStatus === 'active'}
              >
                システム発行
              </Button>
              
              <Button 
                variant="outlined" 
                color="warning"
                disabled={contractorData.systemStatus === 'inactive'}
              >
                システム停止
              </Button>
            </Box>
          </Grid>
        </Grid>
      </CardContent>
    </Card>
  );
};
```

---

## 6. 代理店・イベント管理仕様

### 6.1 代理店マスタ管理

| 項目 | 種類 | 必須 | 説明 |
|------|------|------|------|
| 会社名 | TextField | ○ | 代理店の正式名称 |
| 会社住所 | TextField | ○ | 代理店の所在地 |
| 振込口座情報 | TextField | ○ | 支払い用口座情報 |

### 6.2 代理店階層管理（レイヤー1-4）

| レイヤー | 役職レベル | 管理項目 | 説明 |
|---------|-----------|---------|------|
| レイヤー1 | 最上位管理者 | 氏名・管理対象者・管理役職・電話番号 | 代理店全体の責任者 |
| レイヤー2 | 部門管理者 | 氏名・管理対象者・管理役職・電話番号 | 特定部門・エリアの管理者 |
| レイヤー3 | 店舗管理者 | 氏名・管理対象者・管理役職・電話番号 | 個別店舗の管理者 |
| レイヤー4 | 現場責任者 | 氏名・管理対象者・管理役職・電話番号 | 現場レベルの責任者 |

### 6.3 イベント場所マスタ管理

| 項目 | 種類 | 必須 | 説明 |
|------|------|------|------|
| 住所 | TextField | ○ | イベント実施場所の住所 |
| イベント実施場所 | TextField | ○ | 具体的な会場名・店舗名 |
| イベント場所詳細 | TextArea | - | 補足情報・アクセス方法等 |

### 6.4 請求単価設定（曜日別）

**代理店ごと・火曜〜月曜の曜日別請求単価設定**

| 曜日 | クローザー請求単価 | ガール請求単価 | 単位 |
|------|------------------|---------------|------|
| 火曜日 | NumberField | NumberField | 日給 |
| 水曜日 | NumberField | NumberField | 日給 |
| 木曜日 | NumberField | NumberField | 日給 |
| 金曜日 | NumberField | NumberField | 日給 |
| 土曜日 | NumberField | NumberField | 日給 |
| 日曜日 | NumberField | NumberField | 日給 |
| 月曜日 | NumberField | NumberField | 日給 |

### 6.5 その他設定

| 項目 | 種類 | 説明 |
|------|------|------|
| フラグ（出張・外現場） | Switch | 案件特性の管理 |
| 設営等 | TextArea | 特別な設営要件の記録 |

### 6.6 実装例

```tsx
const ProjectManagement = () => {
  const [agencyData, setAgencyData] = useState({
    companyName: '',
    address: '',
    bankInfo: '',
    layers: {
      layer1: { name: '', position: '', phone: '' },
      layer2: { name: '', position: '', phone: '' },
      layer3: { name: '', position: '', phone: '' },
      layer4: { name: '', position: '', phone: '' }
    }
  });

  const [pricingData, setPricingData] = useState({
    tuesday: { closer: 0, girl: 0 },
    wednesday: { closer: 0, girl: 0 },
    thursday: { closer: 0, girl: 0 },
    friday: { closer: 0, girl: 0 },
    saturday: { closer: 0, girl: 0 },
    sunday: { closer: 0, girl: 0 },
    monday: { closer: 0, girl: 0 }
  });

  const weekdays = [
    { key: 'tuesday', label: '火曜日' },
    { key: 'wednesday', label: '水曜日' },
    { key: 'thursday', label: '木曜日' },
    { key: 'friday', label: '金曜日' },
    { key: 'saturday', label: '土曜日' },
    { key: 'sunday', label: '日曜日' },
    { key: 'monday', label: '月曜日' }
  ];

  return (
    <Card>
      <CardHeader title="代理店・案件管理" />
      <CardContent>
        <Typography variant="h6" gutterBottom>曜日別請求単価設定</Typography>
        <Grid container spacing={2}>
          {weekdays.map(day => (
            <Grid item xs={12} key={day.key}>
              <Typography variant="subtitle2">{day.label}</Typography>
              <Box sx={{ display: 'flex', gap: 2, mt: 1 }}>
                <TextField
                  label="クローザー請求単価"
                  type="number"
                  value={pricingData[day.key].closer}
                  onChange={(e) => setPricingData({
                    ...pricingData,
                    [day.key]: { ...pricingData[day.key], closer: Number(e.target.value) }
                  })}
                  InputProps={{
                    startAdornment: <InputAdornment position="start">¥</InputAdornment>,
                    endAdornment: <InputAdornment position="end">/ 日</InputAdornment>,
                  }}
                />
                <TextField
                  label="ガール請求単価"
                  type="number"
                  value={pricingData[day.key].girl}
                  onChange={(e) => setPricingData({
                    ...pricingData,
                    [day.key]: { ...pricingData[day.key], girl: Number(e.target.value) }
                  })}
                  InputProps={{
                    startAdornment: <InputAdornment position="start">¥</InputAdornment>,
                    endAdornment: <InputAdornment position="end">/ 日</InputAdornment>,
                  }}
                />
              </Box>
            </Grid>
          ))}
        </Grid>
      </CardContent>
    </Card>
  );
};
```

---

## 7. 経理管理仕様

### 7.1 メールテンプレート管理

| テンプレート種類 | 項目 | 説明 |
|---------------|------|------|
| 見積メール件名テンプレート | TextField | 見積書送付時の件名テンプレート |
| 見積メール本文テンプレート | TextArea | 見積書送付時の本文テンプレート |
| 請求メール件名テンプレート | TextField | 請求書送付時の件名テンプレート |
| 請求メール本文テンプレート | TextArea | 請求書送付時の本文テンプレート |

### 7.2 経理ルール設定

| 設定項目 | 種類 | 説明 |
|---------|------|------|
| 品目名設定ルール | TextField | 請求書品目の命名規則 |
| 振込期日ルール | Select | 標準的な支払い期限設定 |
| 消費税率 | NumberField | 適用する消費税率（%） |

### 7.3 実装例

```tsx
const AccountingManagement = () => {
  const [templates, setTemplates] = useState({
    estimateSubject: '',
    estimateBody: '',
    invoiceSubject: '',
    invoiceBody: ''
  });

  const [rules, setRules] = useState({
    itemNamingRule: '',
    paymentTerms: '',
    taxRate: 10
  });

  return (
    <Card>
      <CardHeader title="経理管理設定" />
      <CardContent>
        <Typography variant="h6" gutterBottom>メールテンプレート</Typography>
        <Grid container spacing={2}>
          <Grid item xs={12}>
            <TextField
              label="見積メール件名テンプレート"
              value={templates.estimateSubject}
              onChange={(e) => setTemplates({...templates, estimateSubject: e.target.value})}
              fullWidth
              placeholder="例: 【見積書】{代理店名}様_案件名_{日付}"
            />
          </Grid>
          
          <Grid item xs={12}>
            <TextField
              label="見積メール本文テンプレート"
              value={templates.estimateBody}
              onChange={(e) => setTemplates({...templates, estimateBody: e.target.value})}
              fullWidth
              multiline
              rows={4}
              placeholder="いつもお世話になっております。..."
            />
          </Grid>
        </Grid>
        
        <Typography variant="h6" gutterBottom sx={{ mt: 3 }}>経理ルール</Typography>
        <Grid container spacing={2}>
          <Grid item xs={12} md={6}>
            <TextField
              label="消費税率"
              type="number"
              value={rules.taxRate}
              onChange={(e) => setRules({...rules, taxRate: Number(e.target.value)})}
              InputProps={{
                endAdornment: <InputAdornment position="end">%</InputAdornment>,
              }}
            />
          </Grid>
        </Grid>
      </CardContent>
    </Card>
  );
};
```

---

## 8. システムユーザー管理仕様

### 8.1 システム利用者管理

| 項目 | 種類 | 必須 | 説明 |
|------|------|------|------|
| メールアドレス | TextField | ○ | ログイン用メールアドレス |
| パスワード | PasswordField | ○ | システムアクセス用パスワード |
| ロール | Select | ○ | 権限レベルの設定 |

### 8.2 権限ロール定義

| ロール | 説明 | アクセス権限 |
|--------|------|-------------|
| 経営管理者 | 全システム管理権限 | 全機能・全データアクセス可能 |
| 営業管理 | 営業・案件管理権限 | 案件管理・スタッフ管理・2次請管理 |
| 一般管理 | 限定的な管理権限 | 基本的な管理機能のみ |

### 8.3 実装例

```tsx
const SystemUserManagement = () => {
  const [userData, setUserData] = useState({
    email: '',
    password: '',
    role: ''
  });

  const roleOptions = [
    { value: 'executive_admin', label: '経営管理者' },
    { value: 'sales_admin', label: '営業管理' },
    { value: 'general_admin', label: '一般管理' }
  ];

  return (
    <Card>
      <CardHeader title="システムユーザー管理" />
      <CardContent>
        <Grid container spacing={2}>
          <Grid item xs={12}>
            <TextField
              label="メールアドレス"
              type="email"
              value={userData.email}
              onChange={(e) => setUserData({...userData, email: e.target.value})}
              required
              fullWidth
            />
          </Grid>
          
          <Grid item xs={12}>
            <TextField
              label="パスワード"
              type="password"
              value={userData.password}
              onChange={(e) => setUserData({...userData, password: e.target.value})}
              required
              fullWidth
            />
          </Grid>
          
          <Grid item xs={12}>
            <FormControl fullWidth required>
              <InputLabel>ロール</InputLabel>
              <Select 
                value={userData.role}
                onChange={(e) => setUserData({...userData, role: e.target.value})}
              >
                {roleOptions.map(option => (
                  <MenuItem key={option.value} value={option.value}>
                    {option.label}
                  </MenuItem>
                ))}
              </Select>
            </FormControl>
          </Grid>
        </Grid>
      </CardContent>
    </Card>
  );
};
```

---

## 9. 実装上の考慮事項

### 9.1 状態管理

```tsx
// 設定データの状態管理
interface SettingsState {
  profile: ProfileSettings;
  staff: StaffSettings[];
  subcontractors: SubcontractorSettings[];
  projects: ProjectSettings;
  accounting: AccountingSettings;
  systemUsers: SystemUserSettings[];
}

const useSettingsStore = create<SettingsState>((set, get) => ({
  // スタッフ設定の更新
  updateStaffSettings: (staffId, settings) => 
    set(state => ({ 
      staff: state.staff.map(staff => 
        staff.id === staffId ? { ...staff, ...settings } : staff
      )
    })),
    
  // 2次請システム発行
  issueSystemForSubcontractor: async (contractorId) => {
    const systemUrl = await generateSystemUrl(contractorId);
    return systemUrl;
  },
  
  // 代理店単価設定
  updateAgencyPricing: (agencyId, pricingData) => 
    set(state => ({
      projects: {
        ...state.projects,
        agencies: state.projects.agencies.map(agency =>
          agency.id === agencyId ? { ...agency, pricing: pricingData } : agency
        )
      }
    }))
}));
```

### 9.2 権限制御

```tsx
// 権限チェック機能
const usePermission = () => {
  const { userRole } = useAuth();
  
  const canManageStaff = ['executive_admin', 'sales_admin', 'subcontractor_admin'].includes(userRole);
  const canManageSubcontractors = ['executive_admin', 'sales_admin'].includes(userRole);
  const canManageProjects = ['executive_admin', 'sales_admin'].includes(userRole);
  const canManageAccounting = ['executive_admin', 'accounting'].includes(userRole);
  const canManageSystemUsers = userRole === 'executive_admin';
  
  return {
    canManageStaff,
    canManageSubcontractors,
    canManageProjects,
    canManageAccounting,
    canManageSystemUsers
  };
};
```

### 9.3 データ永続化

- **代理店・2次請情報**: メインデータベース（PostgreSQL/MySQL）
- **スタッフ情報**: スタッフマスタテーブル（自社・2次請統合管理）
- **単価設定**: 代理店別・曜日別単価マスタテーブル
- **システム発行管理**: 2次請システムURL・ステータス管理テーブル
- **経理設定**: テンプレート・ルール設定テーブル

---

## 10. 今後の拡張予定

### 10.1 Phase 2機能

1. **一括操作機能**: 複数スタッフ・代理店への一括設定変更
2. **テンプレート機能**: スタッフ登録・代理店登録のテンプレート化
3. **データ分析**: 稼働率・収益分析レポート機能
4. **自動化設定**: 定期的なデータ同期・通知設定

### 10.2 Phase 3機能

1. **API機能拡張**: 代理店システムとの連携API
2. **モバイル対応**: スマートフォンからの設定管理
3. **レポート機能**: 経営管理レポートの自動生成
4. **監査機能**: 設定変更履歴・コンプライアンス対応

---

この設定画面仕様により、ANSTEYPEの携帯販売営業管理システムにおいて、代理店・2次請会社・スタッフ・案件を効率的に一元管理できます。権限ベースのアクセス制御により、各ユーザーが適切な範囲で設定管理を行えるよう設計されています。