# 1. 画面名

---

**経理管理（Accounting Management）**

---

# 2. 要素別仕様

---

## 2-1. タブナビゲーション

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 基本設定タブ | Tab | 入力 | 会社基本情報設定 |
| メール設定タブ | Tab | 入力 | メール送信設定 |
| 経理ルールタブ | Tab | 入力 | 経理処理ルール設定 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| タブ切り替え | タブクリック | 表示内容の切り替え | 各タブ画面 | 未保存データ確認 |

---

## 2-2. 基本設定タブ

### UI 要素・コントロール・I/O

#### 会社情報セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 会社名 | TextField | 入力 | 会社名（必須） |
| 会社ロゴ | FileUpload | 入力 | 会社ロゴ画像のアップロード |
| ロゴプレビュー | Avatar | 出力 | アップロードしたロゴの表示 |
| 郵便番号 | TextField | 入力 | 会社所在地郵便番号 |
| 住所 | TextField | 入力 | 会社所在地住所 |
| 電話番号 | TextField | 入力 | 会社代表電話番号 |
| FAX番号 | TextField | 入力 | 会社FAX番号 |
| メールアドレス | TextField | 入力 | 会社代表メールアドレス |

#### 請求書設定セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 請求書番号プレフィックス | TextField | 入力 | 請求書番号の接頭辞（例：INV-） |
| 開始番号 | TextField | 入力 | 請求書番号の開始番号 |
| 番号桁数 | TextField | 入力 | 請求書番号の桁数（0埋め） |
| 年度リセット | Switch | 入力 | 年度ごとの番号リセット設定 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| ロゴアップロード | ファイル選択 | 会社ロゴの画像アップロード | 同画面 | 画像形式・サイズチェック |
| 郵便番号検索 | 郵便番号入力完了 | 住所の自動入力 | 同画面 | 郵便番号形式チェック |
| 設定保存 | 保存ボタンクリック | 基本設定の保存 | 同画面 | 全フィールドバリデーション |

---

## 2-3. メール設定タブ

### UI 要素・コントロール・I/O

#### SMTP設定セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| SMTPサーバー | TextField | 入力 | SMTPサーバーのホスト名（必須） |
| ポート番号 | TextField | 入力 | SMTPポート番号（必須） |
| 暗号化方式 | Select | 入力 | なし・SSL・TLS |
| ユーザー名 | TextField | 入力 | SMTP認証ユーザー名 |
| パスワード | TextField | 入力 | SMTP認証パスワード（type="password"） |
| 送信者名 | TextField | 入力 | メール送信者名（必須） |
| 送信者メールアドレス | TextField | 入力 | 送信者メールアドレス（必須） |
| 接続テストボタン | Button | 入力 | SMTP接続テスト実行 |

#### メールテンプレート設定セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 件名テンプレート | TextField | 入力 | メール件名のテンプレート |
| 本文テンプレート | TextField | 入力 | メール本文のテンプレート（multiline） |
| 変数挿入ボタン | Button | 入力 | テンプレート変数の挿入 |
| プレビューボタン | Button | 入力 | メールプレビューの表示 |
| テンプレート保存ボタン | Button | 入力 | テンプレートの保存 |

#### 使用可能変数一覧

| 変数名 | 説明 | 例 |
| --- | --- | --- |
| ${c_company} | 会社名 | 株式会社サンプル |
| ${c_name,1} | 担当者名（敬称なし） | 田中太郎 |
| ${c_name,2} | 担当者名（様付き） | 田中太郎様 |
| ${c_name,3} | 担当者名（さん付き） | 田中太郎さん |
| ${space} | スペース | 　 |
| ${/r} | 改行 | \n |
| ${today} | 今日の日付 | 2024-01-15 |
| ${invoice_no} | 請求書番号 | INV-2024-001 |
| ${amount} | 請求金額 | 150,000円 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| SMTP接続テスト | テストボタンクリック | SMTP設定の接続テスト | 同画面 | SMTP設定必須項目チェック |
| 変数挿入 | 変数ボタンクリック | テンプレートに変数を挿入 | 同画面 | なし |
| プレビュー表示 | プレビューボタンクリック | メールプレビューダイアログ表示 | プレビューダイアログ | なし |
| テンプレート保存 | 保存ボタンクリック | メールテンプレートの保存 | 同画面 | テンプレート形式チェック |

---

## 2-4. 経理ルールタブ

### UI 要素・コントロール・I/O

#### 税率設定セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 消費税率 | TextField | 入力 | 現在の消費税率（%、必須） |
| 税率適用開始日 | TextField | 入力 | 税率の適用開始日（date型、必須） |
| 軽減税率 | TextField | 入力 | 軽減税率（%） |
| 軽減税率対象 | TextField | 入力 | 軽減税率対象項目（multiline） |

#### 支払条件設定セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 標準支払サイト | TextField | 入力 | 標準的な支払サイト（日数） |
| 支払方法 | Select | 入力 | 銀行振込・現金・その他 |
| 振込手数料負担 | Select | 入力 | 当社負担・先方負担・各自負担 |
| 遅延損害金利率 | TextField | 入力 | 遅延損害金の年利率（%） |

#### 経理処理ルールセクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 請求書発行タイミング | Select | 入力 | 即時・月末・翌月初等 |
| 売上計上タイミング | Select | 入力 | 請求書発行時・入金時・実施時 |
| 源泉徴収対象 | Switch | 入力 | 源泉徴収の対象かどうか |
| 源泉徴収税率 | TextField | 入力 | 源泉徴収税率（%） |
| 印紙税対象金額 | TextField | 入力 | 印紙税が必要な契約金額 |

#### 自動処理設定セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 自動請求書発行 | Switch | 入力 | 自動での請求書発行設定 |
| 自動メール送信 | Switch | 入力 | 請求書の自動メール送信 |
| 入金確認通知 | Switch | 入力 | 入金確認時の自動通知 |
| 遅延アラート | Switch | 入力 | 支払遅延時のアラート |
| アラート日数 | TextField | 入力 | 遅延アラートを出す日数 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 税率変更 | 税率フィールド変更 | 税率変更の適用 | 同画面 | 税率範囲チェック（0-100%） |
| 適用開始日変更 | 日付フィールド変更 | 税率適用日の変更 | 同画面 | 未来日付チェック |
| ルール保存 | 保存ボタンクリック | 経理ルールの保存 | 同画面 | 全フィールドバリデーション |

---

## 2-5. メールプレビューダイアログ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 件名プレビュー | Typography | 出力 | 変数置換後の件名表示 |
| 本文プレビュー | Typography | 出力 | 変数置換後の本文表示（改行・スペース反映） |
| サンプルデータ選択 | Select | 入力 | プレビュー用のサンプルデータ選択 |
| 閉じるボタン | Button | 入力 | ダイアログを閉じる |
| テスト送信ボタン | Button | 入力 | テストメールの送信 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| サンプルデータ変更 | セレクト変更 | プレビュー内容の更新 | 同ダイアログ | なし |
| テスト送信 | テスト送信ボタンクリック | 指定メールアドレスにテスト送信 | 同ダイアログ | メールアドレス入力必須 |
| ダイアログ閉じる | 閉じるボタンクリック | ダイアログを閉じる | メール設定画面 | なし |




