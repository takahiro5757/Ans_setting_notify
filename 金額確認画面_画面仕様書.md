# 金額確認画面 画面仕様書

## 1. 画面名

---

**金額確認画面**

![image.png](image.png)

---

## 2. 要素別仕様

---

## 2-1. 年月選択エリア

![image.png](image%201.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 年選択 | YearMonthSelector（年） | 入力 | 対象年を選択（デフォルト：2025年） |
| 月選択 | YearMonthSelector（月） | 入力 | 対象月を選択（デフォルト：1月） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 年変更 | 年選択時 | 選択年を状態更新、週ヘッダー再計算 | なし | なし |
| 月変更 | 月選択時 | 選択月を状態更新、週ヘッダー再計算 | なし | なし |

---

## 2-2. 代理店フィルターエリア

![image.png](image%202.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| すべてボタン | OrganizationButton | 入力 | 全代理店の金額を表示 |
| ABC代理店ボタン | OrganizationButton | 入力 | 株式会社ABC代理店の金額のみ表示 |
| DEF広告ボタン | OrganizationButton | 入力 | DEF広告株式会社の金額のみ表示 |
| GHIプロモーションボタン | OrganizationButton | 入力 | GHIプロモーションの金額のみ表示 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 代理店選択 | ボタンクリック時 | 選択代理店を状態更新、データフィルタリング（「すべて」選択時は全選択、空配列時は「すべて」に戻る） | なし | なし |

---

## 2-3. 表示切替エリア

![image.png](image%203.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 見積ボタン | ToggleButton | 入力 | 見積データのみ表示（デフォルト選択） |
| 請求ボタン | ToggleButton | 入力 | 請求データのみ表示 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 表示切替 | ボタンクリック時 | 見積/請求モード切替、データフィルタリング | なし | なし |

---

## 2-4. 代理店セクションヘッダー

![image.png](image%204.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 代理店名 | Typography | 出力 | 代理店名を太字で表示 |
| アクセントライン | Box | 出力 | 青色の縦線（4px幅、28px高） |
| ヘッダー背景 | Box | 出力 | 背景色#f8f9fa、下ボーダー1px solid #e0e0e0、パディング16px |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| なし | - | - | - | - |

---

## 2-5. テーブルヘッダー

![image.png](image%205.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 店舗名ヘッダー | TableCell | 出力 | 「店舗名」固定表示（太字、最小幅120px、左寄せ） |
| 種別ヘッダー | TableCell | 出力 | 「種別」固定表示（太字、最小幅100px、中央寄せ） |
| 第1週〜第5週ヘッダー | TableCell | 出力 | 動的生成「第N週 (開始日-終了日)」（太字、最小幅120px、右寄せ） |
| 月払いヘッダー | TableCell | 出力 | 「月払い」固定表示（太字、最小幅120px、右寄せ） |
| 月合計ヘッダー | TableCell | 出力 | 「月合計」固定表示（太字、最小幅120px、右寄せ、背景色#e3f2fd） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| なし | - | - | - | - |

---

## 2-6. 金額テーブル

![image.png](image%206.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 店舗名 | TableCell | 出力 | 店舗名を表示（中太字・medium） |
| 種別チップ | Chip | 出力 | 週払い（青）/月払い（紫）/常勤（緑）、small・outlined |
| 第1週〜第5週金額 | TableCell | 出力 | 週払い：金額表示、月払い・常勤：「-」（右寄せ） |
| 月払い金額 | TableCell | 出力 | 週払い：「-」、月払い・常勤：金額表示（太字、右寄せ） |
| 月合計金額 | TableCell | 出力 | 週合計+月払い金額の合計（太字、青背景#e3f2fd、青文字#1976d2、右寄せ） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 行ホバー | マウスオーバー時 | 背景色を薄グレー(#f5f5f5)に変更 | なし | なし |

---

## 2-7. 代理店合計行

![image.png](image%207.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 合計ラベル | TableCell | 出力 | 「合計」と表示（太字、グレー背景#f8f9fa、文字色#495057、フォントサイズ0.95rem） |
| 種別セル | TableCell | 出力 | 空白表示 |
| 各週合計 | TableCell | 出力 | 代理店内の各週金額合計（0の場合「-」、文字色#495057、右寄せ） |
| 月払い合計 | TableCell | 出力 | 代理店内の月払い金額合計（0の場合「-」、文字色#495057、右寄せ） |
| 代理店総合計 | TableCell | 出力 | 代理店の全金額合計（太字、水色背景#d1ecf1、文字色#0c5460、フォントサイズ1rem、右寄せ） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| なし | - | - | - | - |

---

## 2-8. データ不存在時表示

![image.png](image%208.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| メッセージ | Typography | 出力 | 「選択された条件に該当するデータがありません。」（中央配置、Paper内） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| なし | - | - | - | - |

---

# 3. その他仕様（要素に収まらない共通ルールや制約）

- **固定表示**：年月選択・代理店フィルター・表示切替エリアはstickyで画面上部に固定（top: 0, z-index: 1）
- **レイアウト寸法**：
  - 全体：背景色#f5f5f5、最小高さcalc(100vh - 64px)、上下パディング24px、左右32px
  - 固定ヘッダー：背景色#f5f7fa、角丸8px、高さ58px、下マージン24px、左右パディング24px、下パディング16px
  - 代理店セクション間：下マージン32px
- **OrganizationButtonスタイル**：
  - パディング：上下4px、左右12px
  - ボーダー：1px solid #e0e0e0、角丸20px
  - フォントサイズ：0.875rem、最小幅120px、最大幅180px
  - 背景色：未選択#f5f5f5、選択時primary.light
- **カラー設計**：
  - 背景色：全体#f5f5f5、ヘッダー#f5f7fa、代理店ヘッダー#f8f9fa
  - アクセント：青色#1976d2（アクセントライン、月合計列）
  - 種別チップ：週払い（primary/青）、月払い（secondary/紫）、常勤（success/緑）
- **データ処理**：
  - 週ヘッダー動的生成：29日以上の月は第5週を追加表示
  - 金額フォーマット：0円は「-」、それ以外は¥マーク+3桁区切り
  - 金額計算：週合計 = week1 + week2 + week3 + week4 + (week5 || 0)、月合計 = 週合計 + 月払い金額
  - フィルタリング：表示モード（見積/請求）と代理店選択の組み合わせ
- **状態管理**：React State（year, month, selectedAgencies, displayMode）、useMemoによる最適化（filteredData, groupedData）
- **モックデータ**：見積9件・請求9件の計18件、3代理店×複数店舗、週払い・月払い・常勤の組み合わせ
- **アクセシビリティ**：WCAG 2.2 AA 準拠、全ボタンTabキーフォーカス可能、aria-label設定
- **注意事項**：既存の見積処理画面と同じOrganizationButtonスタイルを使用、レイアウト崩れ防止 