# 設定画面 画面仕様書

## 概要

**画面名**: 設定画面  
**URL**: `/settings`  
**目的**: ANSTEYPEの携帯販売営業管理システムにおける包括的な設定管理画面  
**システム概要**: 代理店・2次請会社・スタッフ・案件の一元管理とシステム運用設定

---

## 1. 画面構成

### 1.1 画面構成

設定画面は以下の6つの設定項目で構成されます：

1. **ユーザー情報** - 個人プロフィール設定
   - 詳細仕様: `設定_ユーザー情報_画面仕様書.md`
   
2. **スタッフ管理** - スタッフ情報の管理・編集
   - 詳細仕様: `設定_スタッフ管理_画面仕様書.md`
   
3. **2次店管理** - 2次請会社の管理
   - 詳細仕様: `設定_2次店管理_画面仕様書.md`
   
4. **代理店・イベント管理** - 代理店・案件管理
   - 詳細仕様: `設定_代理店・イベント管理_画面仕様書.md`
   
5. **経理管理** - 経理・請求関連設定
   - 詳細仕様: `設定_経理管理_画面仕様書.md`
   
6. **システムユーザー** - システムユーザー管理
   - 詳細仕様: `設定_システムユーザー_画面仕様書.md`

---

## 2. サイドナビゲーション仕様

### 2.1 ナビゲーション項目

| 項目名 | アイコン | 説明 | 対応コンポーネント | 権限 |
| --- | --- | --- | --- | --- |
| ユーザー情報 | PersonIcon | 個人プロフィール設定 | UserProfileSettings | 全ユーザー |
| スタッフ管理 | GroupIcon | スタッフ情報の管理・編集 | StaffManagement | 経営管理者・営業管理 |
| 2次店管理 | BusinessIcon | 2次請会社の管理 | SubcontractorManagement | 経営管理者・営業管理 |
| 代理店・イベント管理 | CorporateFareIcon | 代理店・案件管理 | ProjectManagement | 経営管理者・営業管理 |
| 経理管理 | AccountBalanceIcon | 経理・請求関連設定 | AccountingManagement | 経営管理者・経理 |
| システムユーザー | AdminPanelSettingsIcon | システムユーザー管理 | SystemUserManagement | 経営管理者のみ |

### 2.2 ナビゲーション状態管理

#### UI仕様
- **アクティブ状態**: 選択中の項目を青色でハイライト
- **ホバー効果**: マウスオーバー時に薄いグレー背景
- **アイコン**: Material-UI アイコンを統一使用
- **レスポンシブ**: モバイル時はハンバーガーメニューに変更

#### 権限制御
- **表示制御**: 権限のない項目は非表示
- **アクセス制御**: 権限のないページへのアクセスは403エラー
- **動的表示**: ログインユーザーの権限に応じて動的に表示項目を変更

### 2.3 ナビゲーションコンポーネント仕様

```typescript
interface NavigationItem {
  id: string;
  label: string;
  icon: React.ComponentType;
  path: string;
  component: React.ComponentType;
  requiredRoles: ('admin' | 'sales_admin' | 'accounting' | 'general')[];
}

const navigationItems: NavigationItem[] = [
  {
    id: 'user-profile',
    label: 'ユーザー情報',
    icon: PersonIcon,
    path: '/settings/profile',
    component: UserProfileSettings,
    requiredRoles: ['admin', 'sales_admin', 'accounting', 'general']
  },
  {
    id: 'staff-management',
    label: 'スタッフ管理',
    icon: GroupIcon,
    path: '/settings/staff',
    component: StaffManagement,
    requiredRoles: ['admin', 'sales_admin']
  },
  // ... 他の項目
];
```

---

## 3. 権限管理

### 3.1 権限レベル定義

| 権限レベル | 説明 | アクセス可能項目 |
| --- | --- | --- |
| 経営管理者 | システム全体の管理権限 | 全項目 |
| 営業管理 | 営業・案件管理権限 | ユーザー情報、スタッフ管理、2次店管理、代理店・イベント管理 |
| 経理 | 経理関連機能の管理権限 | ユーザー情報、経理管理 |
| 一般 | 限定的な機能利用権限 | ユーザー情報のみ |

### 3.2 権限制御実装

- **フロントエンド**: ナビゲーション表示・非表示制御
- **バックエンド**: API レベルでの権限チェック
- **ルーティング**: 権限のないページへのアクセス制御

