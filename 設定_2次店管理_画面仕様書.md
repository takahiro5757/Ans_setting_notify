# 1. 画面名

---

**2次店管理（Subcontractor Management）**

---

# 2. 要素別仕様

---

## 2-1. 2次店一覧テーブル

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 2次店追加ボタン | Button | 入力 | 新しい2次店を追加（variant="contained"） |
| 検索フィールド | TextField | 入力 | 会社名・代表者名での検索 |
| ステータスフィルター | Select | 入力 | 契約状況でのフィルタリング |
| 2次店一覧テーブル | Table | 出力 | 2次店情報の一覧表示 |
| 編集ボタン | IconButton | 入力 | 個別2次店情報の編集 |
| 削除ボタン | IconButton | 入力 | 2次店情報の削除 |
| 契約書ダウンロード | IconButton | 入力 | 契約書のダウンロード |

### テーブル列定義

| 列名 | 幅 | 表示内容 | ソート | フィルター |
| --- | --- | --- | --- | --- |
| 会社名 | 150px | 2次店会社名 | ✅ | ✅ |
| 代表者名 | 120px | 代表者氏名 | ✅ | ✅ |
| 電話番号 | 130px | 連絡先電話番号 | ✅ | ✅ |
| メールアドレス | 180px | 連絡先メールアドレス | ✅ | ✅ |
| 契約状況 | 100px | 契約中・契約終了・審査中 | ✅ | ✅ |
| 契約開始日 | 110px | 契約開始日 | ✅ | ✅ |
| 契約終了日 | 110px | 契約終了日 | ✅ | ✅ |
| アクション | 120px | 編集・削除・契約書ボタン | - | - |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 2次店追加 | 追加ボタンクリック | 新規2次店追加ダイアログ表示 | 編集ダイアログ | なし |
| 検索実行 | 検索フィールド入力 | リアルタイム検索実行 | 同画面 | なし |
| ステータスフィルター | セレクト変更 | 契約状況でのフィルタリング | 同画面 | なし |
| 2次店編集 | 編集ボタンクリック | 2次店編集ダイアログ表示 | 編集ダイアログ | なし |
| 2次店削除 | 削除ボタンクリック | 削除確認ダイアログ表示 | 確認ダイアログ | 関連データチェック |
| 契約書ダウンロード | ダウンロードボタンクリック | 契約書PDFのダウンロード | 同画面 | 契約書存在チェック |

---

## 2-2. 2次店編集ダイアログ

### UI 要素・コントロール・I/O

#### 基本情報セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 会社名 | TextField | 入力 | 2次店会社名（必須） |
| 会社名カナ | TextField | 入力 | 会社名カナ（必須） |
| 代表者名 | TextField | 入力 | 代表者氏名（必須） |
| 代表者名カナ | TextField | 入力 | 代表者氏名カナ（必須） |
| 郵便番号 | TextField | 入力 | 会社所在地郵便番号 |
| 住所 | TextField | 入力 | 会社所在地住所 |
| 電話番号 | TextField | 入力 | 代表電話番号（必須） |
| FAX番号 | TextField | 入力 | FAX番号 |
| メールアドレス | TextField | 入力 | 代表メールアドレス（必須） |
| ホームページURL | TextField | 入力 | 会社ホームページURL |

#### 契約情報セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 契約状況 | Select | 入力 | 契約中・契約終了・審査中・契約停止 |
| 契約開始日 | TextField | 入力 | 契約開始日（date型、必須） |
| 契約終了日 | TextField | 入力 | 契約終了日（date型） |
| 契約更新日 | TextField | 入力 | 契約更新予定日（date型） |
| 契約書ファイル | FileUpload | 入力 | 契約書PDFファイルのアップロード |
| 契約条件 | TextField | 入力 | 特別な契約条件（multiline） |
| 支払条件 | TextField | 入力 | 支払条件・サイクル |
| 手数料率 | TextField | 入力 | Ansteyeへの手数料率（%） |

#### 連絡先情報セクション

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 営業担当者名 | TextField | 入力 | 営業担当者氏名 |
| 営業担当者電話 | TextField | 入力 | 営業担当者電話番号 |
| 営業担当者メール | TextField | 入力 | 営業担当者メールアドレス |
| 経理担当者名 | TextField | 入力 | 経理担当者氏名 |
| 経理担当者電話 | TextField | 入力 | 経理担当者電話番号 |
| 経理担当者メール | TextField | 入力 | 経理担当者メールアドレス |
| 緊急連絡先 | TextField | 入力 | 緊急時連絡先 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 郵便番号検索 | 郵便番号入力完了 | 住所の自動入力 | 同ダイアログ | 郵便番号形式チェック |
| 契約書アップロード | ファイル選択 | 契約書PDFのアップロード | 同ダイアログ | ファイル形式・サイズチェック |
| 契約状況変更 | セレクト変更 | 契約状況に応じたフィールド制御 | 同ダイアログ | なし |
| 保存実行 | 保存ボタンクリック | 2次店情報の保存 | 一覧画面 | 全フィールドバリデーション |
| キャンセル | キャンセルボタンクリック | 変更をキャンセル | 一覧画面 | 変更確認ダイアログ |

---

## 2-3. 契約書管理セクション

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 契約書一覧 | List | 出力 | アップロード済み契約書一覧 |
| 契約書アップロード | FileUpload | 入力 | 新しい契約書のアップロード |
| 契約書プレビュー | Dialog | 出力 | 契約書のプレビュー表示 |
| 契約書ダウンロード | Button | 入力 | 契約書のダウンロード |
| 契約書削除 | IconButton | 入力 | 契約書の削除 |
| バージョン管理 | Chip | 出力 | 契約書のバージョン表示 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 契約書アップロード | ファイル選択 | 新しい契約書をアップロード | 同画面 | PDF形式、10MB以下 |
| 契約書プレビュー | プレビューボタンクリック | 契約書をブラウザで表示 | プレビューダイアログ | なし |
| 契約書ダウンロード | ダウンロードボタンクリック | 契約書をダウンロード | 同画面 | なし |
| 契約書削除 | 削除ボタンクリック | 契約書を削除 | 同画面 | 削除確認ダイアログ |

---

## 2-4. 削除確認ダイアログ

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 警告メッセージ | Typography | 出力 | 削除に関する警告文 |
| 2次店情報表示 | Card | 出力 | 削除対象2次店の基本情報 |
| 関連データ警告 | Alert | 出力 | 関連する案件・スタッフデータの警告 |
| 削除理由 | TextField | 入力 | 削除理由の入力（必須） |
| 削除確認チェック | Checkbox | 入力 | 削除を確認するチェックボックス |
| 削除実行ボタン | Button | 入力 | 削除を実行（color="error"） |
| キャンセルボタン | Button | 入力 | 削除をキャンセル |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 削除実行 | 削除ボタンクリック | 2次店データの論理削除 | 一覧画面 | 削除理由必須、確認チェック必須 |
| キャンセル | キャンセルボタンクリック | 削除をキャンセル | 一覧画面 | なし |



