# HOME画面_画面仕様書

---

# 1. 画面名

---

**HOME画面**

![home_screen.png](home_screen.png)

---

# 2. 要素別仕様

---

## 2-1. ページヘッダー

![page_header.png](page_header.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| ページタイトル | テキスト表示 | 出力 | 「新着通知」を表示 |
| 未読通知数 | テキスト表示 | 出力 | 「未読の通知が X 件あります」を表示 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| なし | - | - | - | - |

---

## 2-2. 通知カード一覧

![notification_cards.png](notification_cards.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 通知カード | カードコンポーネント | 出力 | 新規（未読）通知を最新5件まで表示 |
| 通知種別ラベル | チップコンポーネント | 出力 | 「変更依頼」「シフト提出」などの種別を表示 |
| 2次店名 | テキスト表示 | 出力 | 通知対象の2次店名を表示 |
| 対象月 | テキスト表示 | 出力 | シフト対象月を表示 |
| 相対時刻 | テキスト表示 | 出力 | 「2時間前」「1日前」などの相対時刻を表示 |
| チェックマークオーバーレイ | アニメーション表示 | 出力 | クリック時に表示される確認マーク |
| 追加通知数表示 | テキスト表示 | 出力 | 5件を超える場合「他に X 件の未読通知があります」を表示 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| シフト変更依頼クリック | 変更依頼カードクリック時 | 縮小アニメーション実行→既読処理→詳細ダイアログ表示 | シフト変更依頼詳細ダイアログ | なし |
| シフト提出クリック | シフト提出カードクリック時 | 縮小アニメーション実行→既読処理→カード削除 | なし | なし |

---

## 2-3. シフト変更依頼詳細ダイアログ

![change_request_dialog.png](change_request_dialog.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| ダイアログタイトル | テキスト表示 | 出力 | 「シフト変更依頼詳細」を表示 |
| 変更内容 | テキスト表示 | 出力 | 変更依頼の詳細内容を表示 |
| 閉じるボタン | ボタン | 入力 | ダイアログを閉じる |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| ダイアログ表示 | 変更依頼カードクリック後0.5秒 | 詳細ダイアログを表示 | なし | なし |
| ダイアログ閉じる | 閉じるボタンクリック時 | ダイアログを閉じる | HOME画面 | なし |

---

## 2-4. クイックアクセスボタン

![quick_access_buttons.png](quick_access_buttons.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 案件管理ボタン | ボタン | 入力 | 案件管理画面への遷移ボタン |
| 経理処理ボタン | ボタン | 入力 | 経理処理画面への遷移ボタン |
| シフト管理ボタン | ボタン | 入力 | シフト管理画面への遷移ボタン |
| 設定ボタン | ボタン | 入力 | 設定画面への遷移ボタン |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 案件管理遷移 | 案件管理ボタンクリック時 | 案件管理画面に遷移 | /sales | なし |
| 経理処理遷移 | 経理処理ボタンクリック時 | 経理処理画面に遷移 | /accounting | なし |
| シフト管理遷移 | シフト管理ボタンクリック時 | シフト管理画面に遷移 | /shifts/assign | なし |
| 設定遷移 | 設定ボタンクリック時 | 設定画面に遷移 | /settings | なし |

---

# 3. その他仕様（要素に収まらない共通ルールや制約）

## 通知表示仕様
- **表示対象**: 新規（未読）通知のみを表示
- **表示件数**: 最新5件まで（カード表示）
- **総数表示**: ヘッダー部分で全未読通知数を表示
- **追加表示**: 5件を超える場合は「他に X 件の未読通知があります」を表示
- **並び順**: タイムスタンプ降順（最新が上）
- **更新頻度**: リアルタイム更新（通知状態変更時に自動更新）

## アニメーション仕様
- **チェックマーク表示**: クリック時0.5秒間表示
- **カード縮小アニメーション**: 0.8秒かけてscale(0.05)まで縮小
- **カード詰めアニメーション**: Material-UI Collapseで0.6秒かけて高さを0に
- **イージング**: cubic-bezier(0.25, 0.46, 0.45, 0.94)を使用
- **GPU最適化**: willChange: 'transform, opacity'を適用

## アニメーション制御
- **中断防止**: アニメーション中の通知はDOMに保持し続ける
- **バックグラウンド実行**: ダイアログ表示後もアニメーションを継続
- **状態管理**: removingNotifications、shrinkingNotifications、animatingNotificationsの3つの状態で制御

## 通知種別デザイン
- **シフト提出**: 青色アクセント（#1976d2）
- **変更依頼**: オレンジ色アクセント（#ed6c02）
- **承認**: 緑色アクセント（#2e7d32）
- **却下**: 赤色アクセント（#d32f2f）

## レスポンシブ対応
- **Container**: maxWidth="lg"でレスポンシブ対応
- **カード**: 横幅に応じて適切な余白を確保
- **ボタン**: タッチデバイス対応のサイズ確保

## アクセシビリティ
- **カラーコントラスト**: WCAG 2.2 AA準拠（4.5:1以上）
- **キーボード操作**: 全てのインタラクティブ要素でキーボード操作可能
- **フォーカス表示**: 明確なフォーカス表示

## パフォーマンス
- **表示制限**: カード表示は5件まで（パフォーマンス確保）
- **メモ化**: React.memoやuseMemoを適用
- **遅延読み込み**: 画像の遅延読み込み対応

## 注意事項
- **既読処理**: クリック時に即座に既読状態に変更
- **同時操作**: 複数通知の同時クリックは制御なし（順次処理）
- **データ整合性**: 通知データの整合性はサーバー側で保証
- **エラーハンドリング**: 通信エラー時は通知表示継続


