# 1. 画面名

---

**請求作成画面（フリー請求作成）**

![image.png](image.png)

---

# 2. 要素別仕様

---

## 2-1. ヘッダー部分

![image.png](image%201.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 戻るボタン | IconButton | 出力 | 請求一覧画面に戻る |
| 画面タイトル | Typography | 出力 | 「フリー請求作成」を表示 |
| 請求作成ボタン | Button | 出力 | 請求書を作成する（必須項目未入力時は無効化） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 戻るボタンクリック | クリック時 | 請求一覧画面に戻る | 請求一覧画面 | なし |
| 請求作成ボタンクリック | クリック時 | 請求書を作成する | 請求一覧画面 | 必須項目チェックあり |

---

## 2-2. 基本情報セクション

![image.png](image%202.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 代理店選択 | Select | 入力 | 請求先の代理店を選択（固定リストから選択） |
| 送付先店舗チップ | Chip | 入出力 | 選択済み送付先店舗を青色チップで表示・削除可能 |
| 送付先店舗追加セレクト | Select | 入力 | 送付先店舗を追加選択 |
| 店舗アドレスチップ | Chip | 入出力 | 選択済み店舗アドレスをグレーチップで表示・削除可能 |
| 店舗アドレス追加セレクト | Select | 入力 | 店舗アドレスを追加選択 |
| 発注日 | TextField | 入力 | 発注日を選択（日付型） |
| 振込み期日 | TextField | 入力 | 振込み期日を選択（日付型） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 代理店選択 | 選択時 | 代理店名を保存 | なし | 必須チェックあり |
| 送付先店舗追加 | 選択時 | 送付先店舗リストに追加 | なし | 重複チェックあり |
| 送付先店舗削除 | チップ削除時 | 送付先店舗リストから削除 | なし | なし |
| 店舗アドレス追加 | 選択時 | 店舗アドレスリストに追加 | なし | 重複チェックあり |
| 店舗アドレス削除 | チップ削除時 | 店舗アドレスリストから削除 | なし | なし |
| 発注日選択 | 選択時 | 発注日を保存 | なし | 必須チェックあり |
| 振込み期日選択 | 選択時 | 振込み期日を保存 | なし | 必須チェックあり |

---

## 2-3. 請求品目セクション

![image.png](image%203.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 品目追加ボタン | Button | 出力 | 新しい請求品目を追加 |
| 請求品目テーブル | Table | 入出力 | 請求品目の一覧を表示・編集 |
| 開催日 | TextField | 入力 | イベント実施日を選択（日付型） |
| 品目名 | TextField | 入力 | 請求品目の名称を入力 |
| 単価 | TextField | 入力 | 品目の単価を入力（数値型、¥マーク付き） |
| 数量 | TextField | 入力 | 品目の数量を入力（数値型、最小値1） |
| 課税区分 | Select | 入力 | 課税・非課税を選択 |
| 金額 | Typography | 出力 | 単価×数量の合計金額を自動計算・表示 |
| 削除ボタン | IconButton | 出力 | 請求品目を削除（最後の1行は削除不可） |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 品目追加 | クリック時 | 新しい請求品目を追加 | なし | なし |
| 品目削除 | クリック時 | 選択した請求品目を削除 | なし | 最低1行は残す |
| 品目情報編集 | 入力時 | 請求品目の情報を更新・金額を再計算 | なし | 必須チェックあり |

---

## 2-4. 合計金額表示セクション

![image.png](image%204.png)

### UI 要素・コントロール・I/O

| 要素名 | コントロール種類 | I/O | 説明 |
| --- | --- | --- | --- |
| 小計表示 | Typography | 出力 | 全品目の小計金額を表示 |
| 消費税表示 | Typography | 出力 | 課税対象品目の消費税（10%）を表示 |
| 合計表示 | Typography | 出力 | 小計+消費税の合計金額を表示 |

### イベント定義

| イベント名 | 発生タイミング | イベント概要 | 遷移先 | バリデーション |
| --- | --- | --- | --- | --- |
| 金額自動計算 | 品目変更時 | 小計・消費税・合計を自動計算・更新 | なし | なし |

---

# 3. その他仕様

- **レイアウト**：
  - 画面幅は最大900pxで中央寄せ
  - 各セクション間はDividerで区切り
  - グリッドレイアウトを使用（xs=12, md=6）

- **バリデーション**：
  - 必須項目：代理店名、送付先店舗（最低1つ）、発注日、振込み期日
  - 請求品目：品目名、単価、数量は必須
  - 単価・数量は0より大きい値を入力
  - 請求作成ボタンは必須項目未入力時に無効化

- **データ処理**：
  - 消費税計算：課税対象品目のみ10%を適用
  - 金額計算：単価×数量で自動計算
  - 合計計算：小計+消費税で自動計算
  - データ保存：LocalStorageに一時保存後、請求一覧画面に遷移

- **アクセシビリティ**：
  - WCAG 2.2 AA準拠
  - 色コントラスト比4.5:1以上
  - フォーカス可能な要素にキーボードナビゲーション対応
  - 送付先店舗は青色チップ、店舗アドレスはグレーチップで区別

- **レスポンシブ対応**：
  - デスクトップ：2カラムレイアウト
  - タブレット：2カラムレイアウト（幅調整）
  - モバイル：1カラムレイアウト

- **エラーハンドリング**：
  - 必須項目未入力時はアラート表示
  - 数値入力エラー時は即時フィードバック
  - 保存失敗時はエラーメッセージを表示

- **パフォーマンス**：
  - 請求品目の追加・削除は即時反映
  - 金額計算は自動更新
  - 大量データ処理時もレスポンス維持

- **固定値・マスターデータ**：
  - 代理店リスト：['株式会社ABC代理店', 'DEF広告株式会社', 'GHIプロモーション']
  - 店舗リスト：['大宮店', '浦和店', '川口店', '所沢店', '春日部店', '越谷店', '草加店', '新越谷店', '保木間店', '若葉店', 'その他']
  - 課税区分：['課税', '非課税']

---

**最終更新**: 2024年3月21日  
**作成者**: めっちゃ優秀で絶対ミスをしないエンジニア  
**承認者**: 超イケてる漢宮田様ぁ～ 